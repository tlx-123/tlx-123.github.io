<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>js高级程序语言 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1.课程介绍1.1 课程大纲在线地址: http://naotu.baidu.com/file/5bcd79bc4f1eaf83f96d1ad23baab345?token=d22135c63546f5ee  1.2 目标 理解面向对象开发思想 掌握 JavaScript 面向对象开发相关模式 掌握 JavaScript 中使用正则表达式  1.3 案例演示 贪吃蛇  1.4 学习资源 JavaS">
<meta property="og:type" content="article">
<meta property="og:title" content="js高级程序语言">
<meta property="og:url" content="http://yoursite.com/2017/08/30/js高级/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1.课程介绍1.1 课程大纲在线地址: http://naotu.baidu.com/file/5bcd79bc4f1eaf83f96d1ad23baab345?token=d22135c63546f5ee  1.2 目标 理解面向对象开发思想 掌握 JavaScript 面向对象开发相关模式 掌握 JavaScript 中使用正则表达式  1.3 案例演示 贪吃蛇  1.4 学习资源 JavaS">
<meta property="og:image" content="http://yoursite.com/2017/08/30/images/课程大纲.png">
<meta property="og:image" content="http://yoursite.com/2017/08/30/images/browser-js.png">
<meta property="og:image" content="http://yoursite.com/2017/08/30/images/20160823024542444.jpg">
<meta property="og:image" content="http://yoursite.com/2017/08/30/images/664ba37eeee9f4623c06c066867f1d38_r.jpg">
<meta property="og:image" content="http://yoursite.com/2017/08/30/images/gouzao.png">
<meta property="og:updated_time" content="2017-09-07T08:11:51.088Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="js高级程序语言">
<meta name="twitter:description" content="1.课程介绍1.1 课程大纲在线地址: http://naotu.baidu.com/file/5bcd79bc4f1eaf83f96d1ad23baab345?token=d22135c63546f5ee  1.2 目标 理解面向对象开发思想 掌握 JavaScript 面向对象开发相关模式 掌握 JavaScript 中使用正则表达式  1.3 案例演示 贪吃蛇  1.4 学习资源 JavaS">
<meta name="twitter:image" content="http://yoursite.com/2017/08/30/images/课程大纲.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-js高级" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/30/js高级/" class="article-date">
  <time datetime="2017-08-30T05:44:02.058Z" itemprop="datePublished">2017-08-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      js高级程序语言
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-课程介绍"><a href="#1-课程介绍" class="headerlink" title="1.课程介绍"></a>1.课程介绍</h2><h4 id="1-1-课程大纲"><a href="#1-1-课程大纲" class="headerlink" title="1.1 课程大纲"></a>1.1 课程大纲</h4><p>在线地址: <a href="http://naotu.baidu.com/file/5bcd79bc4f1eaf83f96d1ad23baab345?token=d22135c63546f5ee" target="_blank" rel="external">http://naotu.baidu.com/file/5bcd79bc4f1eaf83f96d1ad23baab345?token=d22135c63546f5ee</a></p>
<p><img src="../images/课程大纲.png" alt="课程大纲"></p>
<h4 id="1-2-目标"><a href="#1-2-目标" class="headerlink" title="1.2 目标"></a>1.2 目标</h4><ul>
<li>理解面向对象开发思想</li>
<li>掌握 JavaScript 面向对象开发相关模式</li>
<li>掌握 JavaScript 中使用正则表达式</li>
</ul>
<h4 id="1-3-案例演示"><a href="#1-3-案例演示" class="headerlink" title="1.3 案例演示"></a>1.3 案例演示</h4><ul>
<li>贪吃蛇</li>
</ul>
<h4 id="1-4-学习资源"><a href="#1-4-学习资源" class="headerlink" title="1.4 学习资源"></a>1.4 学习资源</h4><ul>
<li><p>JavaScript 高级程序设计 ( 第三版 ) </p>
<p>​    前端的红宝书</p>
<p>​    建议每一个前端都完整的看一遍</p>
</li>
</ul>
<ul>
<li>JavaScript面向对象编程指南 ( 第2版 )</li>
<li>JavaScript面向对象精要</li>
<li>JavaScript权威指南</li>
<li>JavaScript语言精粹</li>
<li>你不知道的 JavaScript</li>
</ul>
<h2 id="2-基本概念复习"><a href="#2-基本概念复习" class="headerlink" title="2.基本概念复习"></a>2.基本概念复习</h2><p>由于 JavaScript 高级还是针对 JavaScript 语言本身的一个进阶学习，所以在开始之前我们先对以前所学过的 JavaScript 相关知识点做一个快速复习总结</p>
<h2 id="2-1-重新介绍-JavaScript"><a href="#2-1-重新介绍-JavaScript" class="headerlink" title="2.1 重新介绍 JavaScript"></a>2.1 重新介绍 JavaScript</h2><h5 id="2-1-1-JavaScript-是什么"><a href="#2-1-1-JavaScript-是什么" class="headerlink" title="2.1.1 . JavaScript 是什么"></a>2.1.1 . JavaScript 是什么</h5><ul>
<li>解析执行 :  轻量级解释型的，或是 JIT 编译型的程序设计语言</li>
<li><p>语言特点 :  动态，头等函数 ( First-class  Function )</p>
<p>​又称函数是 JavaScript 中的一等公民</p>
</li>
<li><p>执行环境 :  在宿主环境 ( host environment ) 下运行，浏览器是最常见的 JavaScript 宿主环境</p>
<p>​但是在很多非浏览器环境中也使用 JavaScript ， 例如 node.js</p>
</li>
<li><p>编程范式 :  基于原型、多范式的动态脚本语言，并且支持面向对象、命令式和声明式 ( 如 :  函数式编程 )  编程风格</p>
<p>​$(‘selector’).html().css().attr()</p>
</li>
</ul>
<p>2.1.2. JavaScript 与浏览器的关系</p>
<p><img src="../images/browser-js.png" alt="img"></p>
<h5 id="2-1-3-JavaScript-的组成"><a href="#2-1-3-JavaScript-的组成" class="headerlink" title="2.1.3 . JavaScript 的组成"></a>2.1.3 . JavaScript 的组成</h5><table>
<thead>
<tr>
<th style="text-align:center"><strong>组成部分</strong></th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Ecmascript</td>
<td style="text-align:center">描述了该语言的语法和基本对象</td>
</tr>
<tr>
<td style="text-align:center">DOM</td>
<td style="text-align:center">描述了处理网页内容的方法和接口</td>
</tr>
<tr>
<td style="text-align:center">BOM</td>
<td style="text-align:center">描述了与浏览器进行交互的方法和接口</td>
</tr>
</tbody>
</table>
<h5 id="2-1-4-JavaScript-可以做什么"><a href="#2-1-4-JavaScript-可以做什么" class="headerlink" title="2.1.4. JavaScript 可以做什么"></a>2.1.4. JavaScript 可以做什么</h5><blockquote>
<p>Any application that can be written in Javascript, will eventually be written in JavaScript.</p>
<p>凡是能用 JavaScript  写出来的，最终都会用  JavaScript 写出来</p>
</blockquote>
<ul>
<li>知乎 -  JavaScript 能做什么，该做什么？   <a href="https://www.zhihu.com/question/20796866" target="_blank" rel="external">https://www.zhihu.com/question/20796866</a></li>
</ul>
<ul>
<li>最流行的编程语言 JavaScript 能做什么 ？  <a href="https://github.com/phodal/articles/issues/1" target="_blank" rel="external">https://github.com/phodal/articles/issues/1</a></li>
</ul>
<h5 id="2-1-5-JavaScript-发展历史"><a href="#2-1-5-JavaScript-发展历史" class="headerlink" title="2.1.5.  JavaScript 发展历史"></a>2.1.5.  JavaScript 发展历史</h5><blockquote>
<p>JavaScript 标准参考教程 -  JavaScript 语言的历史 <a href="http://javascript.ruanyifeng.com/introduction/history.html" target="_blank" rel="external">http://javascript.ruanyifeng.com/introduction/history.html</a></p>
</blockquote>
<ul>
<li>JavaScript 的诞生</li>
<li>JavaScript 与 Ecmascript 的关系</li>
<li>JavaScript 与 Java 的关系</li>
<li>JavaScript 的版本</li>
<li>JavaScript 周边大事记</li>
</ul>
<h5 id="2-1-6-小结"><a href="#2-1-6-小结" class="headerlink" title="2.1.6. 小结"></a>2.1.6. 小结</h5><h4 id="2-2-基本概念"><a href="#2-2-基本概念" class="headerlink" title="2.2 基本概念"></a>2.2 基本概念</h4><blockquote>
<p>本小结快速过即可，主要是对学过的内容知识点梳理</p>
</blockquote>
<p>语法</p>
<ul>
<li>区分大小写</li>
<li>标识符</li>
<li>注释</li>
<li>严格模式</li>
<li>语句</li>
</ul>
<p>关键字和保留字</p>
<p>变量</p>
<p>数据类型</p>
<ul>
<li>typeof 操作符</li>
<li>Undefined </li>
<li>Null </li>
<li>Boolean</li>
<li>Number</li>
<li>String</li>
<li>Object</li>
</ul>
<p>操作符</p>
<p>流程控制语句</p>
<p>函数</p>
<h4 id="2-3-JavaScript-中的数据类型"><a href="#2-3-JavaScript-中的数据类型" class="headerlink" title="2.3 JavaScript 中的数据类型"></a>2.3 JavaScript 中的数据类型</h4><p>JavaScript 有5 种简单数据类型 :  Undefined 、Null、Boolean、Number、String 和 1 种复杂数据类型 Object。</p>
<h5 id="2-3-1-基本类型-值类型"><a href="#2-3-1-基本类型-值类型" class="headerlink" title="2.3.1 基本类型 ( 值类型 )"></a>2.3.1 基本类型 ( 值类型 )</h5><ul>
<li>Undefined</li>
<li>Null</li>
<li>Boolean</li>
<li>Number</li>
<li>String</li>
</ul>
<h5 id="2-1-2-复杂类型-引用类型"><a href="#2-1-2-复杂类型-引用类型" class="headerlink" title="2.1.2 复杂类型 ( 引用类型 )"></a>2.1.2 复杂类型 ( 引用类型 )</h5><ul>
<li>Object</li>
<li>Array</li>
<li>Date</li>
<li>RegExp</li>
<li>Function</li>
</ul>
<ul>
<li><p>基本包装类型</p>
<p>​    Boolean</p>
<p>​    Number</p>
<p>​    String</p>
</li>
<li><p>单体内置对象</p>
<p>​    Global</p>
<p>​    Math</p>
</li>
</ul>
<h5 id="2-3-3-类型检测"><a href="#2-3-3-类型检测" class="headerlink" title="2.3.3. 类型检测"></a>2.3.3. 类型检测</h5><ul>
<li>typeof</li>
<li>instanceof</li>
<li>Object.prototype.toString.call()</li>
</ul>
<h5 id="2-3-4-值类型和引用类型在内存中的存储方式-画图说明"><a href="#2-3-4-值类型和引用类型在内存中的存储方式-画图说明" class="headerlink" title="2.3.4. 值类型和引用类型在内存中的存储方式 ( 画图说明 )"></a>2.3.4. 值类型和引用类型在内存中的存储方式 ( 画图说明 )</h5><ul>
<li>值类型按值类型存储</li>
<li>引用类型按引用类型存储</li>
</ul>
<h5 id="2-3-5-值类型和引用类型复制-画图说明"><a href="#2-3-5-值类型和引用类型复制-画图说明" class="headerlink" title="2.3.5. 值类型和引用类型复制 ( 画图说明 )"></a>2.3.5. 值类型和引用类型复制 ( 画图说明 )</h5><ul>
<li>值类型按值复制</li>
<li>引用类型按引用复制</li>
</ul>
<h5 id="2-3-6-值类型和引用类型参数传递-画图说明"><a href="#2-3-6-值类型和引用类型参数传递-画图说明" class="headerlink" title="2.3.6. 值类型和引用类型参数传递( 画图说明 )"></a>2.3.6. 值类型和引用类型参数传递( 画图说明 )</h5><ul>
<li>值类型按值传递</li>
<li>引用类型按引用传递</li>
</ul>
<h5 id="2-3-7-值类型与引用类型的差别"><a href="#2-3-7-值类型与引用类型的差别" class="headerlink" title="2.3.7.  值类型与引用类型的差别"></a>2.3.7.  值类型与引用类型的差别</h5><ul>
<li>基本类型在内存中占据固定大小的空间，因此被保存咋栈内存中</li>
<li>从一个变量向另一个变量复制基本类型的值，复制的是值的副本</li>
<li>引用类型的值是对象，保存在堆内存</li>
<li>包含引用类型值的变量实际上包含的并不是对象本身，而是一个指向该对象的指针</li>
<li>从一个变量向另一个变量复制引用类型的值的时候，复制是引用指针，因此两个变量最终都指向同一个对象</li>
</ul>
<h5 id="2-3-8-小结"><a href="#2-3-8-小结" class="headerlink" title="2.3.8. 小结"></a>2.3.8. 小结</h5><ul>
<li>类型检测方法</li>
<li>值类型和引用类型的存储方式</li>
<li>值类型复制和引用类型复制</li>
<li>方法参数中 值类型数据传递 和引用类型数据传递</li>
</ul>
<h4 id="2-4-JavaScript-执行过程"><a href="#2-4-JavaScript-执行过程" class="headerlink" title="2.4. JavaScript 执行过程"></a>2.4. JavaScript 执行过程</h4><p>JavaScript 运行分为两个阶段 :</p>
<ul>
<li><p>预解析</p>
<p>​    全局预解析 ( 所有变量和函数声明都会提前；同名的函数和变量函数的优先级高 )</p>
<p>​    函数内部预解析 ( 所有的变量、函数和形参都会参与预解析 )</p>
<p>​        函数</p>
<p>​        形参</p>
<p>​        普通变量</p>
</li>
</ul>
<ul>
<li><p>执行</p>
<p>​    先预解析全局作用域，然后执行全局作用域中的代码，在执行全局代码的过程中遇到函数调用就会先进行函数解析，然后在执行函数代码。</p>
</li>
</ul>
<h2 id="3-JavaScript-面向对象编程"><a href="#3-JavaScript-面向对象编程" class="headerlink" title="3. JavaScript 面向对象编程"></a>3. JavaScript 面向对象编程</h2><h4 id="3-1-面向对象介绍"><a href="#3-1-面向对象介绍" class="headerlink" title="3.1. 面向对象介绍"></a>3.1. 面向对象介绍</h4><h5 id="3-1-1-什么是对象"><a href="#3-1-1-什么是对象" class="headerlink" title="3.1.1.  什么是对象"></a>3.1.1.  什么是对象</h5><p>Everything is object   ( 万物皆对象) </p>
<p><img src="../images/20160823024542444.jpg" alt="img"></p>
<p>对象到底是什么，我们可以从两个层次来理解</p>
<p><strong>(1) 对象是单个事物的抽象。</strong></p>
<p>一本书、一辆汽车、一个人都可以是对象，一个数据库、一张网页、一个与远程服务器的连接也可以是对象。当实物被抽象成对象，实物之间的关系就变成了对象之间的关系，从而就可以模拟现实情况，针对对象进行编程。</p>
<p><strong>(2) 对象是一个容器，封装了属性 ( property ) 和方法 ( method ) 。</strong></p>
<p>属性是对象的状态，方法是对象的行为 ( 完成某种任务 ) 。比如，我们可以把动物抽象为animal 对象，使用“属性” 记录具体是那一种动物，使用“方法” 表示动物的某种行为 ( 奔跑、捕获、休息等等 )。</p>
<p>在实际开发中，对象是一个抽象的概念，可以将其简单理解为 :  <strong>数据集或功能集。</strong></p>
<p>ECMAScript-262 把对象定义为 :  <strong>无序属性的集合，其属性可以包含基本值、对象或者函数。</strong>严格来件，这就相当于说对象是一组没有特定顺序的值。对象的每个属性或方法都有一个名字，而每个名字都 映射到一个值。</p>
<p><strong>提示 :</strong> 每个对象都是基于一个引用类型创建的，这些类型可以是系统内置的原生类型，也可以四开发人员自定义的类型。</p>
<h5 id="3-1-2-什么是面向对象"><a href="#3-1-2-什么是面向对象" class="headerlink" title="3.1.2.  什么是面向对象"></a>3.1.2.  什么是面向对象</h5><blockquote>
<p>面向对象不是新的东西，它只是过程式代码的一种高度封装，目的在于提高代码的开发效率和可维护性。</p>
</blockquote>
<p><img src="../images/664ba37eeee9f4623c06c066867f1d38_r.jpg" alt="img"></p>
<p>面向对象编程 —— Object Oriented Progranmming，简称 OOP ， 是一种编程开发思想。 它将真实世界各种复杂的关系，抽象为一个个对象，然后由对象之间的分工与合作，完成对真实世界的模拟。</p>
<p>在面向对象程序开发思想中，每一个对象都是功能中心，具有明确分工，可以完成接受信息、处理数据。发出信息等任务。因此，面向对象编程具有灵活、代码可复用、高度模块化等特点，容易维护和开发，比起由一系列函数或指令组成的传统过程编程( procedural proqramming ),  更适合多人合作的大型软件项目。</p>
<p>面向对象与面向过程 : </p>
<ul>
<li>面向过程就是亲力亲为，事无巨细，面面俱到，步步紧跟，有条不紊</li>
<li>面向对象就是找一个对象，指挥得结果</li>
<li>面向对象将执行者转变成指挥者</li>
<li>面向对象不是面向过程的替代，而是面向过程的封装</li>
</ul>
<p>面向过程的特性</p>
<ul>
<li>封装性</li>
<li>继承性</li>
<li>[ 多态性 ]</li>
</ul>
<p>扩展阅读 : </p>
<ul>
<li>维基百科 - 面向对象程序设计   <a href="https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1" target="_blank" rel="external">https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1</a></li>
</ul>
<ul>
<li>知乎 : 如何用一句话说明什么是面向对象思想？  <a href="https://www.zhihu.com/question/19854505" target="_blank" rel="external">https://www.zhihu.com/question/19854505</a></li>
</ul>
<ul>
<li>知乎 : 什么是面向对象编程思想 ？ <a href="https://www.zhihu.com/question/31021366" target="_blank" rel="external">https://www.zhihu.com/question/31021366</a></li>
</ul>
<h5 id="3-1-3-程序中面向对象的基本体现"><a href="#3-1-3-程序中面向对象的基本体现" class="headerlink" title="3.1.3. 程序中面向对象的基本体现"></a>3.1.3. 程序中面向对象的基本体现</h5><p>在 JavaScript 中，所有数据类型都可以视为对象，当然也可以自定义对象。自定义的对象数据类型就是面向对象中的类 ( Class ) 的概念。</p>
<p>我们以一个例子来说明面向过程和面向对象在程序流程上的不同之处。</p>
<p>假设我们要处理学生的成绩表，为了表示一个学生的成绩，面向过程的程序可以用一个对象表示 ：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> std1 = &#123; <span class="attr">name</span>: <span class="string">'Michael'</span>, <span class="attr">score</span>: <span class="number">98</span> &#125;</div><div class="line"><span class="keyword">var</span> std2 = &#123; name： <span class="string">'Bod'</span>, <span class="attr">score</span>: <span class="number">81</span>&#125;</div></pre></td></tr></table></figure>
<p> 而处理学生成绩可以通过函数实现，比如打印学生的成绩 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">printScore</span> (<span class="params">student</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'姓名：'</span> + student.naem+ <span class="string">' '</span> + <span class="string">'成绩:'</span> + student.score)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果采用面向对象的程序设计思想，我们首选思考的不是程序执行流程，而是 Student 这种数据类型应该被视为一个对象，这个对象拥有 name 和 score 这两个属性 ( Property ) 。如果要打印一个学生的成绩，首选必须创建这个学生对应的对象，然后，给对象发一个 PrintScore 消息，让对象自己把自己的数据打印出来。</p>
<p>抽象数据行为模板 ( Class ) : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span> (<span class="params">name, score</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.score = score</div><div class="line">&#125;</div><div class="line"></div><div class="line">Student.prototype.printScore = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'姓名：'</span> + thiis.name + <span class="string">' '</span> + <span class="string">'成绩：'</span> + <span class="keyword">this</span>.score)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据模板创建具体实例对象 ( Instance ) ：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> std1 = <span class="keyword">new</span> Student(<span class="string">'Michael'</span>, <span class="number">98</span>)</div><div class="line"><span class="keyword">var</span> std2 = <span class="keyword">new</span> Student(<span class="string">'Bob'</span>, <span class="number">81</span>)</div></pre></td></tr></table></figure>
<p>实例对象具有自己的具体行为 ( 给对象法消息 )</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">std1.printScore() <span class="comment">// =&gt; 姓名：Michael 成绩:98</span></div><div class="line">std2.printScore() <span class="comment">// =&gt; 姓名：Bob 成绩 81</span></div></pre></td></tr></table></figure>
<p>面向对象的设计思想是从自然界中来的，因为在自然界中，类( Class ) 和实例 ( Instance ) 的概念是很自然的。 Class是一种抽象概念，比如我定义的 Class——Student，是指学生这个概念，而实例 ( Instance ) 则是一个个具有的 Student，比如，Michael 和 Bob 是两个具体的 Student。</p>
<p>所以，面向对象的设计思想是 :</p>
<ul>
<li>抽象出 Class</li>
<li>根据 Class 创建 Instance</li>
<li>指挥 Instance 得结果</li>
</ul>
<p>面向对象的抽象程度又比函数要高，因为一个 Class 既包含数据，又包含操作数据的方法。</p>
<h4 id="3-2-创建对象"><a href="#3-2-创建对象" class="headerlink" title="3.2 创建对象"></a>3.2 创建对象</h4><h5 id="3-2-1-简单方式"><a href="#3-2-1-简单方式" class="headerlink" title="3.2.1.  简单方式"></a>3.2.1.  简单方式</h5><p>我们可以直接通过 new Object 创建 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>()</div><div class="line">person.name = <span class="string">'Jack'</span></div><div class="line">person.age = <span class="number">18</span></div><div class="line"></div><div class="line">person.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>每次创建通过 new Object ()  比较麻烦，所以可以通过它的简写形式对象字面量来创建</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> person = &#123;</div><div class="line">  name: <span class="string">'Jack'</span>,</div><div class="line">  age: <span class="number">18</span>,</div><div class="line">  sayName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>对于上面的写法固然没有问题，但是假如我们要生成两个 person 实例对象呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> person1 = &#123;</div><div class="line">  name: <span class="string">'jack'</span>,</div><div class="line">  age: <span class="number">18</span>,</div><div class="line">  sayName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> person2 = &#123;</div><div class="line">  name: <span class="string">'Mike'</span>,</div><div class="line">  age:  <span class="number">16</span></div><div class="line">  sayName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过上面的代码可以看出，这样写的代码台过于冗余，重复性太高。</p>
<h5 id="3-2-2-简单方式的改进-工厂函数"><a href="#3-2-2-简单方式的改进-工厂函数" class="headerlink" title="3.2.2.  简单方式的改进 : 工厂函数"></a>3.2.2.  简单方式的改进 : 工厂函数</h5><p>我们可以写一个函数，解决代码重复问题 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span> (<span class="params"> name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    name: name,</div><div class="line">    age: age,</div><div class="line">    sayName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后生成实例对象 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> p1 = createPerson(<span class="string">'Jack'</span>, <span class="number">18</span>)</div><div class="line"><span class="keyword">var</span> p2 = createPerson(<span class="string">'Mack'</span>, <span class="number">20</span>)</div></pre></td></tr></table></figure>
<p>这样封装确实爽多了，通过工厂模式我们解决了创建多个相似对象代码冗余的问题，但却没有解决对象识别的问题  ( 即怎样知道一个对象的类型 )。</p>
<h4 id="3-3-构造函数"><a href="#3-3-构造函数" class="headerlink" title="3.3 构造函数"></a>3.3 构造函数</h4><p>内容引导 : </p>
<ul>
<li>构造函数语法</li>
<li>分析构造函数</li>
<li>构造函数和实例对象的关系<ul>
<li>实例的 constructor 属性</li>
<li>instanceof 操作符</li>
</ul>
</li>
<li>普通函数调用和构造函数调用的区别</li>
<li>构造函数的返回值</li>
<li>构造函数的静态成员和实例成员<ul>
<li>函数也是对象</li>
<li>实例成员</li>
<li>静态成员</li>
</ul>
</li>
<li>构造函数的问题</li>
</ul>
<h5 id="3-3-1-更优雅的工厂函数-构造函数"><a href="#3-3-1-更优雅的工厂函数-构造函数" class="headerlink" title="3.3.1.  更优雅的工厂函数 : 构造函数"></a>3.3.1.  更优雅的工厂函数 : 构造函数</h5><p>一种更优雅的工厂函数就是下面这样，构造函数 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;  </div><div class="line">   <span class="keyword">this</span>.name = name  </div><div class="line">   <span class="keyword">this</span>.age = age  </div><div class="line">   <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;    </div><div class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)  </div><div class="line">   &#125;</div><div class="line"> &#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'Jack'</span>, <span class="number">18</span>)p1.sayName() <span class="comment">// =&gt; Jack</span></div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'Mack'</span>, <span class="number">20</span>)p2.sayName() <span class="comment">// =&gt; Mack</span></div></pre></td></tr></table></figure>
<h5 id="3-3-2-解析构造函数代码的执行"><a href="#3-3-2-解析构造函数代码的执行" class="headerlink" title="3.3.2.  解析构造函数代码的执行"></a>3.3.2.  解析构造函数代码的执行</h5><p>在上面的实例中， Person( ) 函数取代了 createPerson( ) 函数，但是实现效果是一样的。这是为什么呢？</p>
<p>我们注意到， Person ( ) 中的代码与 createPerson ( ) 有以下几点不同之处 ：</p>
<ul>
<li>没有显示的创建对象</li>
<li>直接将属性和方法赋给了 this 对象</li>
<li>没有 return 语句</li>
<li>函数名使用的是大写 的 Person</li>
</ul>
<p>而要创建 Person 实例，则必须使用 new 操作符。 以这种方式调用构造函数会经历一下 4 个步骤:</p>
<ol>
<li>创建一个新对象</li>
<li>将构造函数的作用域赋给新对象 ( 因此 this 就指向了这个新对象 )</li>
<li>执行构造函数中的代码</li>
<li>返回新对象</li>
</ol>
<p>下面是具体的伪代码 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">naem, age</span>) </span>&#123;</div><div class="line">  <span class="comment">// 当使用 new 操作符调用 Person() 的时候，实际上这里会先创建一个对象</span></div><div class="line">  <span class="comment">// var instance = &#123;&#125;</span></div><div class="line">  <span class="comment">// 然后让内部的 this 指向 instance 对象</span></div><div class="line">  <span class="comment">// this = instance</span></div><div class="line">  <span class="comment">// 接下来所有针对 this 的操作实际上操作的就是 instance</span></div><div class="line">  </div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age = age</div><div class="line">  <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// 在函数的结尾处会将 this 返回，也就是 instance</span></div><div class="line">  <span class="comment">// return this</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="3-3-3-构造函数和实例对象的关系"><a href="#3-3-3-构造函数和实例对象的关系" class="headerlink" title="3.3.3.  构造函数和实例对象的关系"></a>3.3.3.  构造函数和实例对象的关系</h5><p>使用构造函数的好处不仅仅在于代码的简洁性，更重要的是我们可以识别对象的具体类型了。在每一个实例对象中同时有一个 constructor 属性，该属性指向创建该实例的构造函数 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(p1.constructor === Person) <span class="comment">// =&gt; true</span></div><div class="line"><span class="built_in">console</span>.log(p2.constructor === Person) <span class="comment">// =&gt; true</span></div><div class="line"><span class="built_in">console</span>.log(p1.constructor === p2.constructor) <span class="comment">// =&gt; true</span></div></pre></td></tr></table></figure>
<p>对象的 constructor 属性最初是用来标识对象类型的，但是，如果要检测对象的类型，还是使用 instanceof 操作符更可靠一些 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(p1 <span class="keyword">instanceof</span> Person) <span class="comment">// =&gt; true</span></div><div class="line"><span class="built_in">console</span>.log(p2 <span class="keyword">instanceof</span> Person) <span class="comment">// =&gt; true</span></div></pre></td></tr></table></figure>
<p><strong>总结:</strong></p>
<ul>
<li>构造函数是根据具体的事物抽象出来的抽象模板</li>
<li>实例对象是跟据抽象的构造函数模板得到的具体实例对象</li>
<li>每一个实例对象都具有一个 constructor 属性，指向创建该实例的构造函数<ul>
<li>注意 :  constructor 是实例的属性的说法不严谨，具体后面的原型会讲到</li>
</ul>
</li>
<li>可以通过实例的 constructor 属性判断实例和构造函数之间的关系<ul>
<li>注意 ： 这种方式不严谨，推荐使用 instanceof 操作符，后面学原型会解释为什么</li>
</ul>
</li>
</ul>
<h5 id="3-3-4-构造函数的问题"><a href="#3-3-4-构造函数的问题" class="headerlink" title="3.3.4. 构造函数的问题"></a>3.3.4. 构造函数的问题</h5><p>使用构造函数带来的最大好处就是创建对象更方便了，但是其本身也存在一个浪费内存的问题:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age = age</div><div class="line">  <span class="keyword">this</span>.type = <span class="string">'human'</span></div><div class="line">  <span class="keyword">this</span>.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'hello'</span> + <span class="keyword">this</span>.name)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'lpz'</span>, <span class="number">18</span>)</div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'jack'</span>, <span class="number">16</span>)</div></pre></td></tr></table></figure>
<p>在该示例中，从表面上好像没什么问题，但是实际上这样做，有一个很大的弊端。那就是对应每一个实例对象，type 和  sayHello  都是一模一样的内容，每一次生成一个实例，都必须为重复的内容，多占用一下内存，如果实例对象很多，会造成极大的内存浪费。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(p1.sayHello === p2.sayHello) <span class="comment">// =&gt; false</span></div></pre></td></tr></table></figure>
<p>对于这种问题我们可以把需要共享的函数定义到构造函数外部 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span> = <span class="title">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'hello'</span> + <span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age = age</div><div class="line">  <span class="keyword">this</span>.type = <span class="string">'human'</span></div><div class="line">  <span class="keyword">this</span>.sayHello = sayHello</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'lpz'</span>, <span class="number">18</span>)</div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'jack'</span>, <span class="number">16</span>)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(p1.sayHello === p2.sayHello) <span class="comment">// =&gt; true</span></div></pre></td></tr></table></figure>
<p>这样确实可以了，但是如果有多个需要共享的函数的话就会造成全局命名空间冲突的问题。</p>
<p>你肯定也想到了可以把多个函数放到一个对象中用来避免全局命名空间冲突的问题 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fns = &#123;</div><div class="line">  sayHello: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'hello'</span> + <span class="keyword">this</span>.name)</div><div class="line">  &#125;,</div><div class="line">  sayAge: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.age)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age = age</div><div class="line">  <span class="keyword">this</span>.type = <span class="string">'human'</span></div><div class="line">  <span class="keyword">this</span>.sayHello = fns.sayHello</div><div class="line">  <span class="keyword">this</span>.sayAge = fns.sayAge</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'lpz'</span>, <span class="number">18</span>)</div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'jack'</span>, <span class="number">16</span>)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(p1.sayHello === p2.sayHello) <span class="comment">// =&gt; true</span></div><div class="line"><span class="built_in">console</span>.log(p1.sayAge === p1.sayAge) <span class="comment">// =&gt; true</span></div></pre></td></tr></table></figure>
<p>致辞，我们利用自己的方式基本上解决了构造函数的内存浪费问题。但是代码看起来还是那么的格格不入，那有没有更好的方式呢？</p>
<h5 id="3-3-5-小结"><a href="#3-3-5-小结" class="headerlink" title="3.3.5. 小结"></a>3.3.5. 小结</h5><ul>
<li>构造函数语法</li>
<li>分析构造函数</li>
<li>构造函数和实例对象的关系<ul>
<li>实例的 construtor 属性</li>
<li>instanceof 操作符</li>
</ul>
</li>
<li>构造函数的问题</li>
</ul>
<h4 id="3-4-原型"><a href="#3-4-原型" class="headerlink" title="3.4.  原型"></a>3.4.  原型</h4><p>内容引导 : </p>
<ul>
<li>使用 prototype 原型对象解决构造函数的问题</li>
<li>分析构造函数、prototype 原型对象、实例对象三者之间的关系</li>
<li>属性成员搜索原则 : 原型链</li>
<li>实例对象读写原型对象中的成员</li>
<li>原型对象的简写形式</li>
<li>原生对象的原型<ul>
<li>Object</li>
<li>Array</li>
<li>String</li>
<li>…</li>
</ul>
</li>
<li>原型对象的问题</li>
<li>构造函数和原型对象使用建议</li>
</ul>
<h5 id="3-1-4-更好的解决方案-prototype"><a href="#3-1-4-更好的解决方案-prototype" class="headerlink" title="3.1.4. 更好的解决方案 : prototype"></a>3.1.4. 更好的解决方案 : prototype</h5><p>Javascript 规定，每一个构造函数都有一个 prototype 属性，指向另一个对象。这个对象的所有属性和方法，都会被构造函数的实例继承。</p>
<p>这也就意味着，我们可以把所有对象实例需要共享的属性和方法直接定义在 prototype 对象上。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age = age</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(Person.prototype)</div><div class="line"></div><div class="line">Person.prototype.type = <span class="string">'human'</span></div><div class="line"></div><div class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(...)</div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(...)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(p1.sayName === p2.sayName) <span class="comment">// =&gt; true</span></div></pre></td></tr></table></figure>
<p>这时所有实例的 type 属性和 sayName() 方法，其实都是同一个内存地址，指向 prototype 对象，因此就提高了运行效率。</p>
<h5 id="3-4-2-构造函数、实例、原理三者之间的关系"><a href="#3-4-2-构造函数、实例、原理三者之间的关系" class="headerlink" title="3.4.2. 构造函数、实例、原理三者之间的关系"></a>3.4.2. 构造函数、实例、原理三者之间的关系</h5><p><img src="../images/gouzao.png" alt="img"></p>
<p>任何函数都具有一个 prototype 属性，该属性是一个对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">F</span> (<span class="params"></span>) </span>&#123;&#125;</div><div class="line"><span class="built_in">console</span>.log(F.prototype) <span class="comment">// =&gt; object</span></div><div class="line"></div><div class="line">F.prototype.sayHi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'hi!'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>构造函数的 prototype 对象默认都有一个 constructor 属性，指向 prototype 对象所在函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(F.constructor === F) <span class="comment">// =&gt; true</span></div></pre></td></tr></table></figure>
<p>通过构造函数得到的实例对象内部会包含一个指向构造函数的 prototype 对象的指针 <strong>proto</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> F()</div><div class="line"><span class="built_in">console</span>.log(instance.__proto__ === F.prototype) <span class="comment">// =&gt; true</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">注意：__proto__ 是非标准属性</div></pre></td></tr></table></figure>
<p>实例对象可以直接访问原型对象成员。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">instance.sayHi() <span class="comment">// =&gt; hi!</span></div></pre></td></tr></table></figure>
<p>总结 : </p>
<ul>
<li>任何函数都具有一个 prototype 属性，该属性是一个对象</li>
<li>构造函数的 prototype 对象默认都有一个 constructor 属性，指向 prototype 对象所在函数</li>
<li>通过构造函数得到的实例对象内部会包含一个指向构造函数的 prototype 对象的指针 <strong>proro</strong></li>
<li>所有实例都直接或间接继承了原型对象的成员</li>
</ul>
<h5 id="3-4-3-属性的搜索原则：-原型链"><a href="#3-4-3-属性的搜索原则：-原型链" class="headerlink" title="3.4.3. 属性的搜索原则： 原型链"></a>3.4.3. 属性的搜索原则： 原型链</h5><p>了解了 <strong>构造函数–实例–原型对象</strong> 三者之间的关系后，接下来我们解释一下为什么实例对象可以访问原型对象中的成员。</p>
<p>每当代码读取某个对象的某个属性是，都会执行一次搜索，目标是具有给定名字的属性</p>
<ul>
<li>搜索首选从对象实例本身开始</li>
<li>如果在实例中找到了具有给定名字的属性，则返回该属性的值</li>
<li>如果没有找到，则继续搜索指针指向的原型对象， 在原型对象中查找具有给定名字的属性</li>
<li>如果在原型对象中找到了这个属性，则返回该属性的值</li>
</ul>
<p>也就是说，在我们调用 person1.sayName( ) 的时候，会先后执行两次搜索 : </p>
<ul>
<li>首先，解析器会问 : “实例 person1 有 sayName 属性吗？” 答 :  “没有”。</li>
<li>然后，他继续搜索，再问 : “person1 的原型有 sayName 属性吗？” 答 : “有。”</li>
<li>于是，它就读写那个保存在原型对象中的函数。</li>
<li>当我们调用 person2.sayName() 时，将会重现相同的搜索过程，得到相同的结果。</li>
</ul>
<p>而这正是多个对象实例共享原型所保存的属性和方法的基本原理。</p>
<p><strong>总结 :</strong> </p>
<p>先在自己身上找，找到即返回</p>
<p>自己身上找不到，则沿着原型链向上查找，找到即返回</p>
<p>如果一直到原型链的末端还没有找到，则返回 undefined</p>
<h5 id="3-4-4-实例对象读写原型对象成员"><a href="#3-4-4-实例对象读写原型对象成员" class="headerlink" title="3.4.4. 实例对象读写原型对象成员"></a>3.4.4. 实例对象读写原型对象成员</h5><p>读取 : </p>
<ul>
<li>先在自己身上找，找到即返回</li>
<li>自己身上找不到，则沿着原型链向上查找，找到即返回</li>
<li>如果一直到原型链的末端还没有找到，则返回 undefined</li>
</ul>
<p>值类型成员写入 （实例对象.值类型成员 = xx ）：</p>
<ul>
<li>当实例期望重写原型对象中的某个普通数据成员时实际上会把成员添加到自己身上</li>
<li>也就是说该行为实际上会屏蔽掉队原型对象成员的访问</li>
</ul>
<p>引用类型成员写入 （实例对象.引用类型成员 = xx）：</p>
<ul>
<li>同上</li>
</ul>
<p>复杂数据类型修改 （实例对象. 成员.xx = xx）:</p>
<ul>
<li>同样会先到自己身上找该成员，如果自己身上找到则直接修改</li>
<li>如果自己身上找不到，则沿着原型链继续查找，如果找到则修改</li>
<li>如果一直到原型链的末端还没有找到该成员，则报错（实例对象.undefined.xx = xx）</li>
</ul>
<h5 id="3-4-5-更简单的原型语法"><a href="#3-4-5-更简单的原型语法" class="headerlink" title="3.4.5. 更简单的原型语法"></a>3.4.5. 更简单的原型语法</h5><p>我们注意到，前面例子中每添加一个属性和方法就要敲一遍 Person. prototype。为减少不必要的输入，更常见的做法是用一个包含所有属性和方法的对象字面量来重写整个原型对象 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age =age</div><div class="line">&#125;</div><div class="line">Person.prototype = &#123;</div><div class="line">  type: <span class="string">'human'</span>,</div><div class="line">  sayHello: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'我叫'</span> + <span class="keyword">this</span>.name + <span class="string">', 我今年'</span> + <span class="keyword">this</span>.age + <span class="string">'岁了'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在该示例中，我们将 Person.prototype 重置到了一个新的对象。这样做的好处就是为了 Person.prototype  添加成员简单了，但是也会带来一个问题，那就是原型对象丢失了 constructor 成员。</p>
<p>所以，我们为了保持 constructor 的指向正确，建议的写法是 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age = age</div><div class="line">&#125;</div><div class="line"></div><div class="line">Person.prototype = &#123;</div><div class="line">  <span class="keyword">constructor</span>: Person, // =&gt; 手动将 <span class="keyword">constructor</span> 指向正确的构造函数</div><div class="line">  type: 'human',</div><div class="line">  sayHello: function () &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'我叫'</span>+ <span class="keyword">this</span>.name + <span class="string">',我今年'</span> + <span class="keyword">this</span>.age + <span class="string">'岁了'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="3-4-6-原生对象的原型"><a href="#3-4-6-原生对象的原型" class="headerlink" title="3.4.6. 原生对象的原型"></a>3.4.6. 原生对象的原型</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">every 给定一个条件，判断数组中是否具有符合该条件的元素</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">100</span>]</div><div class="line"><span class="keyword">var</span> ret = arr.every (<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> item % <span class="number">2</span> === <span class="number">0</span></div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(ret)</div><div class="line"></div><div class="line">原型</div><div class="line"><span class="built_in">Array</span>.prototype.myEvery = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> everyHave = <span class="literal">true</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="keyword">this</span>.length; i++) &#123;</div><div class="line">    <span class="keyword">if</span> (!fn(<span class="keyword">this</span>[i]))&#123;</div><div class="line">      everyHave = <span class="literal">false</span></div><div class="line">      <span class="keyword">break</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> everyHave</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> ret = arr.myEvery(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> item % <span class="number">3</span> === <span class="number">0</span></div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(ret)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">forEach 循环遍历</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</div><div class="line">arr.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(item, index)</div><div class="line">&#125;)</div><div class="line">原型</div><div class="line"><span class="built_in">Array</span>.prototype.myEach = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="keyword">this</span>.length; i++) &#123;</div><div class="line">    <span class="comment">// 每循环一次就调用一次</span></div><div class="line">    fn(<span class="keyword">this</span>[i],i)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">arr.myEach(<span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(item, index)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">some 根据函数条件返回 <span class="literal">true</span> 或者 <span class="literal">false</span></div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">10</span>]</div><div class="line"><span class="keyword">var</span> ret = arr.some(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> item % <span class="number">2</span> === <span class="number">0</span></div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(ret)</div><div class="line"></div><div class="line">原型</div><div class="line"><span class="built_in">Array</span>.prototype.mySome = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> isHave = <span class="literal">false</span></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.lenght; i++) &#123;</div><div class="line">    <span class="keyword">var</span> ret = fn (<span class="keyword">this</span>[i])</div><div class="line">    <span class="keyword">if</span>(isHave = <span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">      <span class="keyword">break</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> isHave</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> ret = arr.mySome(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> item % <span class="number">2</span> === <span class="number">0</span></div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(ret)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">map 将每一个元素处理之后放入一个新的数组，返回数组</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="keyword">var</span> newArr = arr.map(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> item + <span class="number">1</span></div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(newArr)</div><div class="line"></div><div class="line">原型</div><div class="line"><span class="built_in">Array</span>.prototype.maMap = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> tmp = []</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;  <span class="keyword">this</span>.length; i++) &#123;</div><div class="line">    tmp.push(fn (<span class="keyword">this</span>[i],i))</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> tmp</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> ret = arr.myMap(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> item + <span class="number">10</span></div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(ret)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">filter 根据条件过滤到新的数组中</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"><span class="keyword">var</span> ret = arr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> item % <span class="number">2</span> === <span class="number">0</span></div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(ret)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">reduce 将数组根据条件处理完之后，返回最后的计算结果</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line"><span class="keyword">var</span> ret = arr.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">prev, curr</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(prev,curr)</div><div class="line">  <span class="keyword">return</span> prev + curr</div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(ret)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">reverse 反转</div><div class="line"><span class="built_in">String</span>.prototype.reverse = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// 当你使用字符串访问 String.prototype 原型方法的时候</span></div><div class="line">  <span class="comment">// 系统会自动将你的字符串包装成一个伪数组</span></div><div class="line">  <span class="keyword">var</span> tmp = []</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> <span class="keyword">this</span>) &#123;</div><div class="line">    tmp[key] = <span class="keyword">this</span>[key]</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">delete</span> tmp[<span class="string">'reverse'</span>] <span class="comment">// 遍历结束把 reverse 删除</span></div><div class="line">  <span class="keyword">return</span> tmp.reverse().join(<span class="string">''</span>)</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'hello'</span>.reverse())</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">findIndex  根据条件找到第一个符合的元素的索引</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"><span class="keyword">var</span> ret = arr.findIndex(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> item &gt; <span class="number">2</span></div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(ret)</div><div class="line"></div><div class="line">原型</div><div class="line"><span class="built_in">Array</span>.prototype.myFindIndex = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> index = <span class="number">-1</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</div><div class="line">    <span class="comment">// 每循环一次，调用一次 fn</span></div><div class="line">    <span class="comment">// 判定 fn 的返回值</span></div><div class="line">    <span class="comment">// 如果为 true 则表示找到符合该条件的元素，然后将该元素的索引值返回</span></div><div class="line">    <span class="comment">// 如果直到遍历结束都没有找到符合条件的元素，则返回 -1</span></div><div class="line">    <span class="keyword">if</span> (fn(<span class="keyword">this</span>)[i],i) &#123;</div><div class="line">      indx = i</div><div class="line">      <span class="keyword">break</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> index</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> ret = arr.myFindIndex(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> item.age === <span class="number">1</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">find 根据条件找到符合条件的第一个元素</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"><span class="keyword">var</span> ret = arr.find(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> item &gt; <span class="number">2</span></div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(ret)</div></pre></td></tr></table></figure>
<p><strong>总结：</strong></p>
<p>every  给定一个条件，判断数组的所有元素是否符合该条件</p>
<p>forEach  循环遍历</p>
<p>some  用来给定一个条件，判断数组中是否具有符合该条件的元素</p>
<p>map  将每一个元素处理之后放入一个新的数据，返回新数组</p>
<p>filter  根据条件过滤到新数组中</p>
<p>reduce  将数组根据条件处理完之后，返回最后的计算结果</p>
<p>find  根据条件找到符合条件的第一个元素</p>
<p>findIndex  根据条件找到第一个符合的元素的索引</p>
<p>reverse  反转</p>
<p>注意：** 所有函数都有 prototype 属性对象。</p>
<ul>
<li>Object.prototype</li>
<li>Function.prototype</li>
<li>Array.prototype</li>
<li>String.prototype</li>
<li>Number.prototype</li>
<li>Date.prototype</li>
<li>…</li>
</ul>
<h5 id="3-4-7-原型对象的问题"><a href="#3-4-7-原型对象的问题" class="headerlink" title="3.4.7. 原型对象的问题"></a>3.4.7. 原型对象的问题</h5><ul>
<li>共享数组</li>
<li>共享对象</li>
</ul>
<p>如果真的希望可以被实例对象之间共享和修改这些共享数据那就不是问题，但是如果不希望实例之间共享和修改这些共享数据则就是问题。</p>
<p>一个更好的建议是，最好不要让实例之间相互共享这些数据或者对象成员，一旦修改的话会导致数据的走向很不明确而且难以维护。</p>
<h5 id="3-4-8-原型对象使用建议"><a href="#3-4-8-原型对象使用建议" class="headerlink" title="3.4.8. 原型对象使用建议"></a>3.4.8. 原型对象使用建议</h5><ul>
<li>私有成员（一般就是非函数成员）放到构造函数中</li>
<li>共享成员（一般就是函数） 放到原型对象中</li>
<li>如果重置了 prototype 记得修正 constructor 的指向</li>
</ul>
<p>引用类型</p>
<p>这种数据如果你就希望是让所有实例都共享数据，那就定义到原型对象上</p>
<p>如果不希望这个数据被共享，那就最好定义到实例自己身上</p>
<h3 id="5-继承"><a href="#5-继承" class="headerlink" title="5.继承"></a>5.继承</h3><h4 id="5-1-什么是继承"><a href="#5-1-什么是继承" class="headerlink" title="5.1.什么是继承"></a>5.1.什么是继承</h4><ul>
<li>现实生活中的继承</li>
<li>程序中的继承</li>
</ul>
<h4 id="5-2-构造函数的属性继承-借用构造函数"><a href="#5-2-构造函数的属性继承-借用构造函数" class="headerlink" title="5.2. 构造函数的属性继承 : 借用构造函数"></a>5.2. 构造函数的属性继承 : 借用构造函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.type = <span class="string">'human'</span></div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age = age</div><div class="line">&#125;</div><div class="line"></div><div class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'hello'</span> + <span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  Person.call(<span class="keyword">this</span>, name, age)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 原型对象拷贝继承原型对象成员</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> Person.prototype) &#123;</div><div class="line">  Student.prototype[key] = Person.prototype[key]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> s1 = Student(<span class="string">'张三'</span>, <span class="number">18</span>)</div><div class="line">s1.sayName() <span class="comment">// =&gt; hello 张三</span></div></pre></td></tr></table></figure>
<h4 id="5-4-另一种继承方式-原型继承"><a href="#5-4-另一种继承方式-原型继承" class="headerlink" title="5.4. 另一种继承方式 : 原型继承"></a>5.4. 另一种继承方式 : 原型继承</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.type = <span class="string">'human'</span></div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age = age</div><div class="line">&#125;</div><div class="line"></div><div class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'hello'</span> + <span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  Person.call(<span class="keyword">this</span>, name, age)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 利用原型的特性实现继承</span></div><div class="line">Student.Prototype = <span class="keyword">new</span> Person()</div><div class="line"></div><div class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Student(<span class="string">'张三'</span>, <span class="number">18</span>)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(s1.type) <span class="comment">// =&gt; human</span></div><div class="line">s1.sayName() <span class="comment">// =&gt; hello 张三</span></div></pre></td></tr></table></figure>
<h3 id="6-函数进阶"><a href="#6-函数进阶" class="headerlink" title="6.函数进阶"></a>6.函数进阶</h3><h4 id="6-1-函数的定义方式"><a href="#6-1-函数的定义方式" class="headerlink" title="6.1.函数的定义方式"></a>6.1.函数的定义方式</h4><ul>
<li>函数声明</li>
<li>函数表达式</li>
<li>new  Function</li>
</ul>
<h5 id="6-1-1-函数声明"><a href="#6-1-1-函数声明" class="headerlink" title="6.1.1. 函数声明"></a>6.1.1. 函数声明</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="6-1-2-函数表达式"><a href="#6-1-2-函数表达式" class="headerlink" title="6.1.2.函数表达式"></a>6.1.2.函数表达式</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="6-1-3-函数声明与函数表达式的区别"><a href="#6-1-3-函数声明与函数表达式的区别" class="headerlink" title="6.1.3. 函数声明与函数表达式的区别"></a>6.1.3. 函数声明与函数表达式的区别</h5><ul>
<li>函数声明必须有名字</li>
<li>函数声明会函数提升，在预解析阶段就已创建，声明前后都可以调用</li>
<li>函数表达式类似于变量赋值</li>
<li>函数表达式可以没有名字，例如匿名函数</li>
<li>函数表达式有变量提升，在执行阶段创建，必须在表达式执行之后才可以调用</li>
</ul>
<p>下面是一个根据条件定义函数的例子 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</div><div class="line">  &#125;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以上代码执行结果在不同浏览器中结果不一致。</p>
<p>不过我们可以使用函数表达式解决上面的问题 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f</div><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">  f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</div><div class="line">  &#125;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="6-2-函数的调用方式"><a href="#6-2-函数的调用方式" class="headerlink" title="6.2. 函数的调用方式"></a>6.2. 函数的调用方式</h4><ul>
<li>普通函数</li>
<li>构造函数</li>
<li>对象方法</li>
</ul>
<h4 id="6-3-函数内-this-指向的不同的场景"><a href="#6-3-函数内-this-指向的不同的场景" class="headerlink" title="6.3. 函数内 this 指向的不同的场景"></a>6.3. 函数内 this 指向的不同的场景</h4><p>函数的调用方式决定了 this 指向的不同 : </p>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>调用方式</strong></th>
<th style="text-align:center"><strong>非严格模式</strong></th>
<th style="text-align:center"><strong>备注</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">普通函数调用</td>
<td style="text-align:center">window</td>
<td style="text-align:center">严格模式下是 undefined</td>
</tr>
<tr>
<td style="text-align:center">构造函数调用</td>
<td style="text-align:center">实例对象</td>
<td style="text-align:center">原型方法中 this 也是实例对象</td>
</tr>
<tr>
<td style="text-align:center">对象方法调用</td>
<td style="text-align:center">该方法所属对象</td>
<td style="text-align:center">紧挨着的对象</td>
</tr>
<tr>
<td style="text-align:center">事件绑定方法</td>
<td style="text-align:center">绑定事件对象</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">定时器函数</td>
<td style="text-align:center">window</td>
</tr>
</tbody>
</table>
<p>这就是对函数内部 this 指向的基本整理，写代码写多了自然而然就熟悉了。</p>
<h4 id="6-4-函数也是对象"><a href="#6-4-函数也是对象" class="headerlink" title="6.4. 函数也是对象"></a>6.4. 函数也是对象</h4><ul>
<li>所有函数都是 Function 实例</li>
</ul>
<h4 id="6-5-call、apply、bind"><a href="#6-5-call、apply、bind" class="headerlink" title="6.5. call、apply、bind"></a>6.5. call、apply、bind</h4><p>那了解了函数 this 指向的不同场景之后，我们知道有些情况下我们为了使用某种特定环境的 this 引用，这时候我就需要采用一些特殊手段来处理了，例如我们经常在定时器外部备份 this 引用，然后在定时器函数内部使用外部 this 的引用。然而实际上对于这种做法我们的 JavaScript 为我们专门提供了一些函数方法用来帮我们更优雅的处理函数内部 this 指向问题。这就是要学习的 call、apply、bind三个函数方法。</p>
<h5 id="6-5-1-call"><a href="#6-5-1-call" class="headerlink" title="6.5.1. call"></a>6.5.1. call</h5><p>call () 方法调用一个函数，其具有一个指定的 this 值和分别提供的参数(参数的列表)。</p>
<p>注意 : 该方法的作用和 apply () 方法类似，只有一个区别，就是 call () 方法接受的是若干个参数的列表，而 apply () 方法接受的是一个包含多个参数的数组。</p>
<p>语法 :  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fun.call(<span class="keyword">this</span>, arg1, ar2, ......)</div></pre></td></tr></table></figure>
<ul>
<li>参数 :<ul>
<li>this</li>
<li>在 fun 函数运行时指定的 this 值</li>
</ul>
</li>
<li>如果指定了 null 或者 undefined 则内部 this 指向 window<ul>
<li>arg1, arg2, ……</li>
<li>指定的参数列表</li>
</ul>
</li>
</ul>
<h5 id="6-5-2-apply"><a href="#6-5-2-apply" class="headerlink" title="6.5.2. apply"></a>6.5.2. apply</h5><p>apply () 方法调用一个函数，其具有一个指定的 this 值，以及作为一个数组 ( 或类似数组的对象 ) 提供的参数。</p>
<p>注意 : 该方法的作用和 call () 方法类似，只有一个区别，就是 call () 方法接受的是若干个参数的列表，而 apply () 方法接受的是一个包含多个参数的数组。</p>
<p>语法 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fun.apply(<span class="keyword">this</span>, [argsArray])</div></pre></td></tr></table></figure>
<p>参数 : </p>
<ul>
<li>this</li>
<li>argsArray</li>
</ul>
<p>apply ()  与 call () 非常相似，不同之处在于提供参数的方式。apply () 使用参数数组而不是一组参数列表。例如:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fun.apply(<span class="keyword">this</span>, [<span class="string">'eat'</span>,<span class="string">'bananas'</span>])</div></pre></td></tr></table></figure>
<p> 6.5.3. bind</p>
<p>bind () 函数会创建一个新函数 ( 称为绑定函数 )，新函数与被调函数 ( 绑定函数的目标函数 )具有相同的函数体 (在 ECMAScript 5 规范中内置的call属性 )。当目标函数被调用时 this 值绑定到 bind () 的第一个参数，该参数不能被重写。绑定函数被调用时， bind () 也接受预设的参数提供给原函数。一个绑定函数也能使用 new 操作符创建对象 : 这种行为就像把原函数当成构造函数。提供的 this 值被忽略，同时调用时的参数被提供给模拟函数。</p>
<p>语法 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fun.bind(<span class="keyword">this</span>, arg1, arg2, ...)</div></pre></td></tr></table></figure>
<p>参数 :</p>
<ul>
<li>this<ul>
<li>当绑定函数被调用时，该参数会作为原函数运行时的 this 指向。当使用 new 操作符调用绑定函数时，该参数无效 。</li>
</ul>
</li>
<li>atg1, arg2, …<ul>
<li>当绑定函数被调用时，这些参数将置于实参之前传递给绑定的方法。</li>
</ul>
</li>
</ul>
<p>返回值 : </p>
<p>返回由指定的 this 值和初始化参数改造的原函数拷贝。</p>
<p>示例1 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.x = <span class="number">9</span>;</div><div class="line"><span class="keyword">var</span> <span class="built_in">module</span> = &#123;</div><div class="line">  x: <span class="number">81</span>,</div><div class="line">  getX: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.x&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.get(); <span class="comment">// 返回 81</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> retrieveX = <span class="built_in">module</span>.gettX;</div><div class="line">retriveX(); <span class="comment">// 返回 9，在这种情况下，"this"指向全局作用域</span></div><div class="line"></div><div class="line"><span class="comment">// 创建一个新函数，将"this"绑定到module对象</span></div><div class="line"><span class="comment">// 新手可能会被全局的X变量和module里的属性X所迷惑</span></div><div class="line"><span class="keyword">var</span> boundGetX = retrieveX.bind(<span class="built_in">module</span>);</div><div class="line">boundGetX(); <span class="comment">// 返回 81</span></div></pre></td></tr></table></figure>
<h5 id="6-5-4-小结"><a href="#6-5-4-小结" class="headerlink" title="6.5.4. 小结"></a>6.5.4. 小结</h5><ul>
<li>call 和 apply 特性一样<ul>
<li>都是用来调用函数，而且是立即调用</li>
<li>但是可以在调用函数的同时，通过第一个参数指定函数内部 this 的指向</li>
<li>call 调用的时候，参数必须以参数列表的形式进行传递，也就是以逗号分隔的方式依次传递即可</li>
<li>apply 调用的时候，参数必须是一个数组，然后在执行的时候，会将数组内部的元素一个一个拿出来，与形参一一对应进行传递</li>
<li>如果第一个参数指定了null 或者 undefined 则内部 this 指向 window</li>
</ul>
</li>
</ul>
<ul>
<li>bind<ul>
<li>可以用来指定内部 this 的指向，然后生成一个改变了 this 指向的新的函数</li>
<li>它和 call、apply最大的区别是 : bind 不会调用</li>
<li>bind支持传递参数，它的传参方式比较特殊，一共有两个位置可以传递<ul>
<li>a. 在bind的同时，以参数列表的形式进行传递</li>
<li>b. 在调用的时候，以参数列表的形式进行传递</li>
<li>那到底以谁 bind 的时候传递的参数为准呢还是以调用的时候传递的参数为准</li>
<li>两者合并 : bind 的时候传递的参数和调用的时候传递的参数会合并到一起，传递到函数内部</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="6-6-函数的其他成员"><a href="#6-6-函数的其他成员" class="headerlink" title="6.6. 函数的其他成员"></a>6.6. 函数的其他成员</h4><ul>
<li>arguments<ul>
<li>实参集合</li>
</ul>
</li>
<li>caller<ul>
<li>函数的调用者</li>
</ul>
</li>
<li>length<ul>
<li>形参的个数</li>
</ul>
</li>
<li>name<ul>
<li>函数的名称</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x, y, z</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(fn.length) <span class="comment">// =&gt; 形参的个数</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>) <span class="comment">// =&gt; 伪数组实参参数的集合</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee === fn ) <span class="comment">// 函数本身</span></div><div class="line">  <span class="built_in">console</span>.log(fn.caller) <span class="comment">// 函数的调用者</span></div><div class="line">  <span class="built_in">console</span>.log(fn.name) <span class="comment">// =&gt; 函数的名字</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  fn(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line">f()</div></pre></td></tr></table></figure>
<h4 id="6-7-高阶函数"><a href="#6-7-高阶函数" class="headerlink" title="6.7. 高阶函数"></a>6.7. 高阶函数</h4><ul>
<li>函数可以作为参数</li>
<li>函数可以作为返回值</li>
</ul>
<h5 id="6-7-1-作为参数"><a href="#6-7-1-作为参数" class="headerlink" title="6.7.1. 作为参数"></a>6.7.1. 作为参数</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">eat</span> (<span class="params">callback</span>) </span>&#123;</div><div class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'吃完了'</span>)</div><div class="line">    callback()</div><div class="line">  &#125;,<span class="number">1000</span>) </div><div class="line">&#125;</div><div class="line"></div><div class="line">eat (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'去唱歌'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h5 id="6-7-2-作为返回值"><a href="#6-7-2-作为返回值" class="headerlink" title="6.7.2. 作为返回值"></a>6.7.2. 作为返回值</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">genFun</span> (<span class="params">type</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> functon (obj) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototypr.toString.call(obj) === <span class="literal">true</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> isArray = genFun(<span class="string">'[object Array]'</span>)</div><div class="line"><span class="keyword">var</span> isObject = gefun(<span class="string">'[object Object]'</span>)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(isArray([])) <span class="comment">// =&gt; true</span></div><div class="line"><span class="built_in">console</span>.log(isObject([])) <span class="comment">// =&gt; true</span></div></pre></td></tr></table></figure>
<h4 id="6-8-函数闭包"><a href="#6-8-函数闭包" class="headerlink" title="6.8. 函数闭包"></a>6.8. 函数闭包</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> count = <span class="number">0</span>;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    getCount: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(count)</div><div class="line">    &#125;,</div><div class="line">    setCount: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      count++</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> fns = fn()</div><div class="line"></div><div class="line">fns.getCount() <span class="comment">// =&gt; 0</span></div><div class="line">fns.setCount() </div><div class="line">fns.getCount() <span class="comment">// =&gt; 1</span></div></pre></td></tr></table></figure>
<h5 id="6-8-1-作用域、作用域链、预解析"><a href="#6-8-1-作用域、作用域链、预解析" class="headerlink" title="6.8.1. 作用域、作用域链、预解析"></a>6.8.1. 作用域、作用域链、预解析</h5><ul>
<li>全局作用域</li>
<li>函数作用域</li>
<li><strong>没有块级作用域</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="keyword">var</span> foo = <span class="string">'bar'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo)</div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">123</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(a)</div></pre></td></tr></table></figure>
<p>作用域链示例代码 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> b = <span class="number">20</span></div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="keyword">var</span> c = <span class="number">30</span></div><div class="line">   <span class="built_in">console</span>.log(a + b + c)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> d = <span class="number">40</span></div><div class="line">    <span class="built_in">console</span>.log(c + d)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  fn1()</div><div class="line">  fn2()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>内层作用域可以访问外层作用域，反之不行</li>
</ul>
<h5 id="6-8-2-什么是闭包"><a href="#6-8-2-什么是闭包" class="headerlink" title="6.8.2. 什么是闭包"></a>6.8.2. 什么是闭包</h5><p>闭包就是能够读取其他函数内部变量的函数，由于在 javascript 语言中，只有函数内部的子函数才能读取局部变量，因此可以把闭包简单理解成 “定义在一个内部的函数”。所以，在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。</p>
<p>闭包的用途 :</p>
<ul>
<li>可以在函数外部读取函数内部成员</li>
<li>让函数内成员始终存活在内存中</li>
</ul>
<h5 id="6-8-3-一些关于闭包的例子"><a href="#6-8-3-一些关于闭包的例子" class="headerlink" title="6.8.3. 一些关于闭包的例子"></a>6.8.3. 一些关于闭包的例子</h5><p>示例1 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</div><div class="line">  arr[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(i)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>示例2 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="number">111</span>)</div><div class="line"></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</div><div class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(i)</div><div class="line">  &#125;,<span class="number">0</span>)</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="number">222</span>)</div></pre></td></tr></table></figure>
<h5 id="6-8-4-闭包的思考题、"><a href="#6-8-4-闭包的思考题、" class="headerlink" title="6.8.4. 闭包的思考题、"></a>6.8.4. 闭包的思考题、</h5><p>思考题 1 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> name = <span class="string">"The Window"</span>;</div><div class="line"><span class="keyword">var</span> object = &#123;</div><div class="line">  name: <span class="string">"My Object"</span>,</div><div class="line">  getNameFun: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">console</span>.log(object.getNameFun()())  <span class="comment">// =&gt; The Window</span></div></pre></td></tr></table></figure>
<p>思考题 2 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> name = <span class="string">"The Window"</span>;</div><div class="line"><span class="keyword">var</span> object = &#123;</div><div class="line">  name: <span class="string">"My Object"</span>,</div><div class="line">  getNameFunc: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> that.name;</div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">console</span>.log(object.getNameFunc()())  <span class="comment">// =&gt; My Object</span></div></pre></td></tr></table></figure>
<h5 id="6-8-5-小结"><a href="#6-8-5-小结" class="headerlink" title="6.8.5. 小结"></a>6.8.5. 小结</h5><h4 id="6-9-函数递归"><a href="#6-9-函数递归" class="headerlink" title="6.9. 函数递归"></a>6.9. 函数递归</h4><h5 id="6-9-1-递归执行模型"><a href="#6-9-1-递归执行模型" class="headerlink" title="6.9.1. 递归执行模型"></a>6.9.1. 递归执行模型</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">111</span>)</div><div class="line">  fn2()</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'fn1'</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">222</span>)</div><div class="line">  fn3()</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'fn2'</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">333</span>)</div><div class="line">  fn4()</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'fn3'</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn4</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">444</span>)</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'fn4'</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line">fn1()</div><div class="line"></div><div class="line"><span class="comment">//  111</span></div><div class="line"><span class="comment">//  222</span></div><div class="line"><span class="comment">//  333</span></div><div class="line"><span class="comment">//  444</span></div><div class="line"><span class="comment">//  fn4</span></div><div class="line"><span class="comment">//  fn3</span></div><div class="line"><span class="comment">//  fn2</span></div><div class="line"><span class="comment">//  fn1</span></div></pre></td></tr></table></figure>
<h5 id="6-9-2-举个例子-计算阶乘的递归函数"><a href="#6-9-2-举个例子-计算阶乘的递归函数" class="headerlink" title="6.9.2. 举个例子 : 计算阶乘的递归函数"></a>6.9.2. 举个例子 : 计算阶乘的递归函数</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span> (<span class="params">num</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span>(num &lt;= <span class="number">1</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span></div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span> num * factorial(num - <span class="number">1</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="6-9-3-递归应用场景"><a href="#6-9-3-递归应用场景" class="headerlink" title="6.9.3. 递归应用场景"></a>6.9.3. 递归应用场景</h5><ul>
<li>深拷贝</li>
<li>菜单树</li>
<li>遍历 DOM 树</li>
</ul>
<h3 id="7-正则表达式"><a href="#7-正则表达式" class="headerlink" title="7. 正则表达式"></a>7. 正则表达式</h3><ul>
<li>了解正则表达式基本语法</li>
<li>能够使用javaScript的正则对象</li>
</ul>
<h4 id="7-1-正则表达式简介"><a href="#7-1-正则表达式简介" class="headerlink" title="7.1. 正则表达式简介"></a>7.1. 正则表达式简介</h4><h5 id="7-1-1-什么是正则表达式"><a href="#7-1-1-什么是正则表达式" class="headerlink" title="7.1.1. 什么是正则表达式"></a>7.1.1. 什么是正则表达式</h5><p>正则表达式 : 用于匹配规律规则的表达式，正则表达式最初是科学家对于人类神经系统的工作原理的早期研究，现在在编程语言中有广泛的应用。正则表通常被用来检索、替换那些符合某个模式 (规则) 的文本。正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个”规则字符串”用来表达对字符串的一种过滤逻辑。</p>
<h5 id="7-1-2-正则表达式的作用"><a href="#7-1-2-正则表达式的作用" class="headerlink" title="7.1.2. 正则表达式的作用"></a>7.1.2. 正则表达式的作用</h5><ol>
<li>给定的字符串是否符合正则表达式的过滤逻辑 (匹配)</li>
<li>可以通过正则表达式，从字符串中获取我们想要的特定部分 (提取)</li>
<li>强大的字符串替换能力 (替换)</li>
</ol>
<h5 id="7-1-3-正则表达式的特点"><a href="#7-1-3-正则表达式的特点" class="headerlink" title="7.1.3. 正则表达式的特点"></a>7.1.3. 正则表达式的特点</h5><ol>
<li>灵活性、逻辑性和功能性非常强</li>
<li>可以迅速地用极简单的方式达到字符串的复杂控制</li>
<li>对于刚接触的人老说，比较晦涩难懂</li>
</ol>
<h4 id="7-2-正则表达式的测试"><a href="#7-2-正则表达式的测试" class="headerlink" title="7.2. 正则表达式的测试"></a>7.2. 正则表达式的测试</h4><ul>
<li>在线测试正则  <a href="https://c.runoob.com/front-end/854" target="_blank" rel="external">https://c.runoob.com/front-end/854</a></li>
<li>工具中使用正则表达式<ul>
<li>sublime/vscode/word</li>
<li>演示替换所有的数字</li>
</ul>
</li>
</ul>
<h4 id="7-3-正则表达式的组成"><a href="#7-3-正则表达式的组成" class="headerlink" title="7.3. 正则表达式的组成"></a>7.3. 正则表达式的组成</h4><ul>
<li>普通字符</li>
<li>特殊字符 (元字符) : 正则表达式中有特殊意义的字符</li>
</ul>
<p>示例演示 ：</p>
<ul>
<li>\d  匹配数字</li>
<li>ab\d  匹配  ab1、ab2</li>
</ul>
<h4 id="7-4-元字符串"><a href="#7-4-元字符串" class="headerlink" title="7.4. 元字符串"></a>7.4. 元字符串</h4><p>通过测试工具演示小面元字符的使用</p>
<h5 id="7-4-1-常用元字符串"><a href="#7-4-1-常用元字符串" class="headerlink" title="7.4.1. 常用元字符串"></a>7.4.1. 常用元字符串</h5><table>
<thead>
<tr>
<th style="text-align:center">元字符</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\d</td>
<td style="text-align:center">匹配数字</td>
</tr>
<tr>
<td style="text-align:center">\D</td>
<td style="text-align:center">匹配任意非数字的字符串</td>
</tr>
<tr>
<td style="text-align:center">\w</td>
<td style="text-align:center">匹配字母或数字或下划线</td>
</tr>
<tr>
<td style="text-align:center">\W</td>
<td style="text-align:center">匹配任意不是字母，数字，下划线</td>
</tr>
<tr>
<td style="text-align:center">\s</td>
<td style="text-align:center">匹配任意的空白符</td>
</tr>
<tr>
<td style="text-align:center">\S</td>
<td style="text-align:center">匹配任意不是空白符的字符</td>
</tr>
<tr>
<td style="text-align:center">.</td>
<td style="text-align:center">匹配除换行符以外的任意单个字符</td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:center">表示匹配行首的文本 (以谁开始)</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td style="text-align:center">表示匹配行尾的文本 (以谁结束)</td>
</tr>
</tbody>
</table>
<h5 id="7-4-2-限定符"><a href="#7-4-2-限定符" class="headerlink" title="7.4.2. 限定符"></a>7.4.2. 限定符</h5><table>
<thead>
<tr>
<th style="text-align:center">限定符</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">重复零次或更多次</td>
</tr>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:center">重复一次或更多次</td>
</tr>
<tr>
<td style="text-align:center">?</td>
<td style="text-align:center">重复零次或一次</td>
</tr>
<tr>
<td style="text-align:center">{n}</td>
<td style="text-align:center">重复n次</td>
</tr>
<tr>
<td style="text-align:center">{n,}</td>
<td style="text-align:center">重复n次或更多次</td>
</tr>
<tr>
<td style="text-align:center">{n,m}</td>
<td style="text-align:center">重复n到m次</td>
</tr>
</tbody>
</table>
<h5 id="7-4-3-其它"><a href="#7-4-3-其它" class="headerlink" title="7.4.3. 其它"></a>7.4.3. 其它</h5><p>[ ]  字符串用中括号括起来，表示匹配其中的任一字符，相当于或的意思</p>
<p>[ ^ ]  匹配除中括号以内的内容</p>
<p>\   转以符</p>
<p>| 或者，选择两者中的一个。注意 | 将左右两边分为两部分，而不管左右两边有多长多乱</p>
<p>( ) 从两个 直接量中选择一个，分组</p>
<p>​    eg : gr( a | e) y匹配gray和grey</p>
<p>[\u4e00-\u9fa5]  匹配汉字</p>
<h4 id="7-5-案例"><a href="#7-5-案例" class="headerlink" title="7.5. 案例"></a>7.5. 案例</h4><p>验证手机号 : </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">^\d&#123;<span class="number">11</span>&#125;$</div></pre></td></tr></table></figure>
<p>验证邮编 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">^\d&#123;<span class="number">6</span>&#125;$</div></pre></td></tr></table></figure>
<p>验证日期 2012-5-01</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">^\d&#123;<span class="number">4</span>&#125;-\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;-\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;$</div></pre></td></tr></table></figure>
<p>验证邮箱 xx@itcast.cn :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">^\w+@\w+\.\w+$</div></pre></td></tr></table></figure>
<p>验证IP地址 192.168.1.10</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">^\d&#123;<span class="number">1</span>,<span class="number">3</span>&#125;\(.\d&#123;<span class="number">1</span>,<span class="number">3</span>&#125;)&#123;<span class="number">3</span>&#125;$</div></pre></td></tr></table></figure>
<h3 id="8-javaScript-中使用正则表达式"><a href="#8-javaScript-中使用正则表达式" class="headerlink" title="8. javaScript 中使用正则表达式"></a>8. javaScript 中使用正则表达式</h3><h4 id="8-1-创建正则对象"><a href="#8-1-创建正则对象" class="headerlink" title="8.1. 创建正则对象"></a>8.1. 创建正则对象</h4><p>方式1 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> Pegex(<span class="string">'\d'</span>,<span class="string">'i'</span>);</div><div class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> Pegex(<span class="string">'\d'</span>, <span class="string">'gi'</span>);</div></pre></td></tr></table></figure>
<p>方式2 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d/i</span>;</div><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d/gi</span>;</div></pre></td></tr></table></figure>
<h5 id="8-1-1-参数"><a href="#8-1-1-参数" class="headerlink" title="8.1.1. 参数"></a>8.1.1. 参数</h5><table>
<thead>
<tr>
<th style="text-align:center">标志</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">i</td>
<td style="text-align:center">忽略大小写</td>
</tr>
<tr>
<td style="text-align:center">g</td>
<td style="text-align:center">全局匹配</td>
</tr>
<tr>
<td style="text-align:center">gi</td>
<td style="text-align:center">全局匹配+忽略大小写</td>
</tr>
</tbody>
</table>
<h4 id="8-2-正则匹配"><a href="#8-2-正则匹配" class="headerlink" title="8.2. 正则匹配"></a>8.2. 正则匹配</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 匹配日期</span></div><div class="line"><span class="keyword">var</span> dateStr = <span class="string">'2015-10-10'</span>;</div><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;$/</span></div><div class="line"><span class="built_in">console</span>.log(reg.test(dateStr));</div></pre></td></tr></table></figure>
<h4 id="8-3-正则提取"><a href="#8-3-正则提取" class="headerlink" title="8.3. 正则提取"></a>8.3. 正则提取</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1. 提取工资</span></div><div class="line"><span class="keyword">var</span> str = <span class="string">"张三: 1000, 李四: 5000, 王五: 8000"</span>;</div><div class="line"><span class="keyword">var</span> array = str.match(<span class="regexp">/\d+/g</span>);</div><div class="line"><span class="built_in">console</span>.log(array);</div><div class="line"></div><div class="line"><span class="comment">// 2.提取email地址</span></div><div class="line"><span class="keyword">var</span> str = <span class="string">"123123@xx.com,fangfang@valuedopinions.cn 286669312@qq.com 2、emailenglish@emailenglish.englishtown.com 286669312@qq.com..."</span>;</div><div class="line"><span class="keyword">var</span> array = str.match(<span class="regexp">/\w+@\w+\.\w+(\.\w+)?/g</span>);</div><div class="line"><span class="built_in">console</span>.log(array);</div><div class="line"></div><div class="line"><span class="comment">// 3. 分组提取</span></div><div class="line"><span class="comment">// 3. 提取日期中的年部分 2015-5-10</span></div><div class="line"><span class="keyword">var</span> dateStr = <span class="string">'2016-1-5'</span>;</div><div class="line"><span class="comment">// 正则表达式中的 () 作为分组来使用，获取分组匹配到的结果用Pegex.$1 $2 $3......来获取</span></div><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\d&#123;4&#125;)-\d&#123;1,2&#125;-\d&#123;1,2&#125;/</span>;</div><div class="line"><span class="keyword">if</span> (reg.test(dateStr)) &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 4.提取邮件中的每一部分</span></div><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\w+)@(\w+)\.(\w+)(\.\w+)?/</span>;</div><div class="line"><span class="keyword">var</span> str = <span class="string">"123123@xx.com"</span>;</div><div class="line"><span class="keyword">if</span>(reg.test(str)) &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">1</span>);</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">2</span>);</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">3</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="8-4-正则替换"><a href="#8-4-正则替换" class="headerlink" title="8.4. 正则替换"></a>8.4. 正则替换</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1. 替换所有空白</span></div><div class="line"><span class="keyword">var</span> str = <span class="string">"   123AD   asafsd     dafdsgdfbd    adf"</span>;</div><div class="line">str = str.replace(<span class="regexp">/\s/g</span>,<span class="string">"xx"</span>);</div><div class="line"><span class="built_in">console</span>.log(str);</div><div class="line"></div><div class="line"><span class="comment">// 2.替换所有,|,</span></div><div class="line"><span class="keyword">var</span> str = <span class="string">"abc,efd,123,avab,3434,a"</span>;</div><div class="line">str = str.replace(<span class="regexp">/,|,/g</span>,<span class="string">"."</span>);</div><div class="line"><span class="built_in">console</span>.log(str);</div></pre></td></tr></table></figure>
<h4 id="8-5-案例-表单验证"><a href="#8-5-案例-表单验证" class="headerlink" title="8.5. 案例 : 表单验证"></a>8.5. 案例 : 表单验证</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line">QQ号：&lt;input type=<span class="string">"text"</span> id=<span class="string">"txtQQ"</span>&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;</div><div class="line">邮箱：&lt;input type="text" id="txtEMail"&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;</div><div class="line">手机：&lt;input type="text" id="txtPhone"&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;</div><div class="line">生日：&lt;input type="text" id="txtBirthday"&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;</div><div class="line">姓名：&lt;input type="text" id="txtName"&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;</div><div class="line">//获取文本框</div><div class="line">var txtQQ = document.getElementById("txtQQ");</div><div class="line">var txtEMail = document.getElementById("txtEMail");</div><div class="line">var txtPhone = document.getElementById("txtPhone");</div><div class="line">var txtBirthday = document.getElementById("txtBirthday");</div><div class="line">var txtName = document.getElementById("txtName");</div><div class="line"></div><div class="line">//</div><div class="line">txtQQ.onblur = function () &#123;</div><div class="line">  //获取当前文本框对应的span</div><div class="line">  var span = this.nextElementSibling;</div><div class="line">  var reg = /^\d&#123;5,12&#125;$/;</div><div class="line">  //判断验证是否成功</div><div class="line">  if(!reg.test(this.value) )&#123;</div><div class="line">    //验证不成功</div><div class="line">    span.innerText = "请输入正确的QQ号";</div><div class="line">    span.style.color = "red";</div><div class="line">  &#125;else&#123;</div><div class="line">    //验证成功</div><div class="line">    span.innerText = "";</div><div class="line">    span.style.color = "";</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//txtEMail</div><div class="line">txtEMail.onblur = function () &#123;</div><div class="line">  //获取当前文本框对应的span</div><div class="line">  var span = this.nextElementSibling;</div><div class="line">  var reg = /^\w+@\w+\.\w+(\.\w+)?$/;</div><div class="line">  //判断验证是否成功</div><div class="line">  if(!reg.test(this.value) )&#123;</div><div class="line">    //验证不成功</div><div class="line">    span.innerText = "请输入正确的EMail地址";</div><div class="line">    span.style.color = "red";</div><div class="line">  &#125;else&#123;</div><div class="line">    //验证成功</div><div class="line">    span.innerText = "";</div><div class="line">    span.style.color = "";</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">表单验证部分，封装成函数：</div><div class="line"></div><div class="line">var regBirthday = /^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;$/;</div><div class="line">addCheck(txtBirthday, regBirthday, "请输入正确的出生日期");</div><div class="line">//给文本框添加验证</div><div class="line">function addCheck(element, reg, tip) &#123;</div><div class="line">  element.onblur = function () &#123;</div><div class="line">    //获取当前文本框对应的span</div><div class="line">    var span = this.nextElementSibling;</div><div class="line">    //判断验证是否成功</div><div class="line">    if(!reg.test(this.value) )&#123;</div><div class="line">      //验证不成功</div><div class="line">      span.innerText = tip;</div><div class="line">      span.style.color = "red";</div><div class="line">    &#125;else&#123;</div><div class="line">      //验证成功</div><div class="line">      span.innerText = "";</div><div class="line">      span.style.color = "";</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line">通过给元素增加自定义验证属性对表单进行验证：</div><div class="line"></div><div class="line">&lt;form id="frm"&gt;</div><div class="line">  QQ号：&lt;input type="text" name="txtQQ" data-rule="qq"&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;</div><div class="line">  邮箱：&lt;input type="text" name="txtEMail" data-rule="email"&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;</div><div class="line">  手机：&lt;input type="text" name="txtPhone" data-rule="phone"&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;</div><div class="line">  生日：&lt;input type="text" name="txtBirthday" data-rule="date"&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;</div><div class="line">  姓名：&lt;input type="text" name="txtName" data-rule="cn"&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;</div><div class="line">&lt;/form&gt;</div><div class="line">// 所有的验证规则</div><div class="line">var rules = [</div><div class="line">  &#123;</div><div class="line">    name: 'qq',</div><div class="line">    reg: /^\d&#123;5,12&#125;$/,</div><div class="line">    tip: "请输入正确的QQ"</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    name: 'email',</div><div class="line">    reg: /^\w+@\w+\.\w+(\.\w+)?$/,</div><div class="line">    tip: "请输入正确的邮箱地址"</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    name: 'phone',</div><div class="line">    reg: /^\d&#123;11&#125;$/,</div><div class="line">    tip: "请输入正确的手机号码"</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    name: 'date',</div><div class="line">    reg: /^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;$/,</div><div class="line">    tip: "请输入正确的出生日期"</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    name: 'cn',</div><div class="line">    reg: /^[\u4e00-\u9fa5]&#123;2,4&#125;$/,</div><div class="line">    tip: "请输入正确的姓名"</div><div class="line">  &#125;];</div><div class="line"></div><div class="line">addCheck('frm');</div><div class="line"></div><div class="line"></div><div class="line">//给文本框添加验证</div><div class="line">function addCheck(formId) &#123;</div><div class="line">  var i = 0,</div><div class="line">      len = 0,</div><div class="line">      frm =document.getElementById(formId);</div><div class="line">  len = frm.children.length;</div><div class="line">  for (; i &lt; len; i++) &#123;</div><div class="line">    var element = frm.children[i];</div><div class="line">    // 表单元素中有name属性的元素添加验证</div><div class="line">    if (element.name) &#123;</div><div class="line">      element.onblur = function () &#123;</div><div class="line">        // 使用dataset获取data-自定义属性的值</div><div class="line">        var ruleName = this.dataset.rule;</div><div class="line">        var rule =getRuleByRuleName(rules, ruleName);</div><div class="line"></div><div class="line">        var span = this.nextElementSibling;</div><div class="line">        //判断验证是否成功</div><div class="line">        if(!rule.reg.test(this.value) )&#123;</div><div class="line">          //验证不成功</div><div class="line">          span.innerText = rule.tip;</div><div class="line">          span.style.color = "red";</div><div class="line">        &#125;else&#123;</div><div class="line">          //验证成功</div><div class="line">          span.innerText = "";</div><div class="line">          span.style.color = "";</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 根据规则的名称获取规则对象</div><div class="line">function getRuleByRuleName(rules, ruleName) &#123;</div><div class="line">  var i = 0,</div><div class="line">      len = rules.length;</div><div class="line">  var rule = null;</div><div class="line">  for (; i &lt; len; i++) &#123;</div><div class="line">    if (rules[i].name == ruleName) &#123;</div><div class="line">      rule = rules[i];</div><div class="line">      break;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  return rule;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="9-JavaScript-模块化编程"><a href="#9-JavaScript-模块化编程" class="headerlink" title="9. JavaScript 模块化编程"></a>9. JavaScript 模块化编程</h3><ul>
<li>CommonJS</li>
<li>AMD</li>
<li>CMD</li>
<li>UMD</li>
</ul>
<h4 id="9-1-模块化介绍"><a href="#9-1-模块化介绍" class="headerlink" title="9.1. 模块化介绍"></a>9.1. 模块化介绍</h4><blockquote>
<p>掌握模块化基本概念以及使用模块化带来的好处</p>
</blockquote>
<p><strong>当网站开发越来越复杂的时候，会经常遇到什么问题?</strong></p>
<ul>
<li>恼人的命名冲突</li>
<li>繁琐的文件依赖</li>
</ul>
<p>历史上，JavaScript一直没有模块 ( module ) 体系，无法将一个大程序拆分成互相依赖的小文件，再用简单的方法拼接装起来。其他语言都有这项功能，比如Puby的 require、Python的 import，甚至就连CSS都有 @import，c语言中的 include，但是javaScript任何这方面的支持都没有，这对开发大型的、复杂的项目形成了巨大障碍。</p>
<p>对于一些其他语言的编程人员，都不知道模块化这么一会事，因为人家的语言天生就支持，它就认为这是一个理所当然的事情。</p>
<ul>
<li>模块化的作用就是 : 私有空间</li>
<li>可以加载，可以导出</li>
<li>什么是模块化<ul>
<li>模块化是指解决一个复杂问题时自顶向下逐层把系统划分成若干模块的过程，有多种属性，分别反映其内部特性。</li>
<li>解决复杂问题的一种方式而已</li>
<li>电脑 : CPU、主板、显示器、内存、硬盘、输入与输出设备</li>
<li>房屋模块化</li>
</ul>
</li>
<li>使用模块化开发的方式带来的好处<ul>
<li>生产效率高</li>
<li>可维护性高</li>
</ul>
</li>
</ul>
<hr>
<h4 id="9-2-模块化开发演变"><a href="#9-2-模块化开发演变" class="headerlink" title="9.2. 模块化开发演变"></a>9.2. 模块化开发演变</h4><blockquote>
<p>体验刀耕火种的模块化解决方式</p>
</blockquote>
<h5 id="9-2-1-全局函数"><a href="#9-2-1-全局函数" class="headerlink" title="9.2.1 全局函数"></a>9.2.1 全局函数</h5><ul>
<li>污染了全局变量</li>
<li>模块成员之间看不出直接关系</li>
</ul>
<h5 id="9-2-2-命名空间"><a href="#9-2-2-命名空间" class="headerlink" title="9.2.2. 命名空间"></a>9.2.2. 命名空间</h5><ul>
<li>理论意义上减少了变量冲突</li>
<li>缺点 1 : 暴露了模块中所有的成员，内部状态可以被外部改写，不安全</li>
<li>缺点 2 : 命名空间会越来越长</li>
</ul>
<h5 id="9-2-3-私有空间"><a href="#9-2-3-私有空间" class="headerlink" title="9.2.3. 私有空间"></a>9.2.3. 私有空间</h5><ul>
<li>私有空间的变量和函数不会影响全局作用域</li>
<li>公开公有方法，隐藏私有属性</li>
</ul>
<h5 id="9-2-4-模块的维护和扩展"><a href="#9-2-4-模块的维护和扩展" class="headerlink" title="9.2.4. 模块的维护和扩展"></a>9.2.4. 模块的维护和扩展</h5><ul>
<li>开闭原则</li>
<li>可维护性好</li>
</ul>
<h5 id="9-2-5-模块的第三方依赖"><a href="#9-2-5-模块的第三方依赖" class="headerlink" title="9.2.5. 模块的第三方依赖"></a>9.2.5. 模块的第三方依赖</h5><ul>
<li>保证模块的独立性</li>
<li>模块之间的依赖关系变得明显</li>
</ul>
<h5 id="9-2-6-总结"><a href="#9-2-6-总结" class="headerlink" title="9.2.6. 总结"></a>9.2.6. 总结</h5><p>以后如果不使用第三方规范的情况下，如果写模块可以采用下面这种方式 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1. 分号是什么意思</span></div><div class="line"><span class="comment">// 2. 为什么要给你的代码加一个匿名自执行函数</span></div><div class="line"><span class="comment">// 3. 为什么要把使用的依赖作为参数传递进来</span></div><div class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params">形参模块名,依赖项,依赖项</span>) </span>&#123;</div><div class="line">  <span class="comment">// 通过 形参模块名 修改模块</span></div><div class="line">  </div><div class="line">  <span class="comment">// 如果需要，可以通过给 window 对象挂载属性对外暴露内部成员</span></div><div class="line">  <span class="built_in">window</span>.模块名 = 形参模块名</div><div class="line">&#125;)(<span class="built_in">window</span>.模块名 || &#123;&#125;, 依赖项,依赖项)</div></pre></td></tr></table></figure>
<h4 id="9-3-模块化规范"><a href="#9-3-模块化规范" class="headerlink" title="9.3. 模块化规范"></a>9.3. 模块化规范</h4><h5 id="9-3-1-模块系统理解"><a href="#9-3-1-模块系统理解" class="headerlink" title="9.3.1. 模块系统理解"></a>9.3.1. 模块系统理解</h5><p>自然界生态系统、计算机操作系统、软件办公系统，还有教育系统、金融系统、网络系统、理论系统等等。究竟什么是系统呢?</p>
<blockquote>
<p>维基百科 : 系统泛指由一群有关连的个体系统组成，根据预先编排好的规则工作，能完成个别元件不能单独完成的工作的群体。</p>
<p>系统分为自然系统与认为系统两大类。</p>
</blockquote>
<p>简单来说，系统有两个基本特性 :</p>
<ol>
<li>系统由个体组成</li>
<li>个体之间有关联，按照规则协同完成任务</li>
</ol>
<p>系统之间的个体可以成为系统成员，要构建一个系统，最基本的层面需要做两件事 :</p>
<ol>
<li><strong>定义系统成员</strong> : 确定成员是什么<ul>
<li>模块是一个 JavaScript 文件</li>
<li>每一个模块都使用 define 函数去定义</li>
</ul>
</li>
<li><strong>约定系统通讯</strong> : 确定成员之间如何交互，遵循的规则是什么<ul>
<li>一个 SeaJS 模块默认就是私有作用域</li>
<li>如果想要被外部文件模块所访问，就必须把要公开的属性挂载给 module.exports 对象接口</li>
<li>使用 require 函数可以加载一个指定的模块，得到该模块代码中暴露的接口对象</li>
</ul>
</li>
<li>如何启动整个模块系统<ul>
<li>在 html 页面中使用 seajs.use ( ) 方法，指定一个入口文件模块</li>
</ul>
</li>
</ol>
<p>Sea.js 是一个适用于 Web 浏览器端的模块加载器。在 Sea.js 里，一切皆是模块，所有模块协同构建成模块系统。Sea.js首要要解决的是模块系统的基本问题 : </p>
<ol>
<li>模块是什么 ?</li>
<li>模块之间如何交互 ?</li>
</ol>
<p>在前端开发领域，一个模块，可以使JS模块，也可以是CSS模块，或是 Template 等模块。而 Sea.js 则专注于 JS 文件模块 :</p>
<ol>
<li>模块是一段 JavaScript 代码，具有统一的 <strong>基本书写格式</strong></li>
<li>模块之间通过基本 <strong>交互规则</strong>，能彼此引用，协同工作</li>
</ol>
<p>Sea.js 遵循的是 CMD 规范。</p>
<h5 id="9-3-2-常见的-JavaScript-模块化规范"><a href="#9-3-2-常见的-JavaScript-模块化规范" class="headerlink" title="9.3.2. 常见的 JavaScript 模块化规范"></a>9.3.2. 常见的 JavaScript 模块化规范</h5><p>规范其实就是这些库在推广的过程中逐渐形成的一套规则。</p>
<p>所谓的规范也就是 :</p>
<ul>
<li>定义了模块的书写格式</li>
<li>以及模块之间的交互规则</li>
<li>NOde 环境<ul>
<li>CommonJs</li>
</ul>
</li>
</ul>
<ul>
<li>浏览器环境<ul>
<li>AMD<ul>
<li>RequireJS</li>
</ul>
</li>
<li>CMD Common Module Definition<ul>
<li>CMD 就是 SeaJS 这个模块加载器在推广的过程中定义的一个模块规范</li>
</ul>
</li>
</ul>
</li>
<li>ECMAScript<ul>
<li>ECMAScript  6</li>
</ul>
</li>
<li>UMD</li>
</ul>
<p>CMD、AMD、CommonJS 都是社区制定出来的模块化规范，他们的目的都是为了解决 JavaScript 没有模块化系统的问题。他们都有如何定义模块成员，以及模块成员之间如何进行通信交互的规则。</p>
<p>2015 年 9 月份，ECMAScript 官方推出了 ECMAScript  6 语言标准。在最新的 ES6 语言规范标准中制定了 JavaScript 模块化规范，通过 export 和 import 两个关键字来作为交互规则。</p>
<p>ES6 才是未来的趋势，以后的大一统。</p>
<h3 id="10-SeaJS"><a href="#10-SeaJS" class="headerlink" title="10.SeaJS"></a>10.SeaJS</h3><hr>
<blockquote>
<p>A Module Loader for the Web,Enjoy the fun og programming.</p>
</blockquote>
<ul>
<li>官网 : <a href="https://seajs.github.io/seajs/docs/" target="_blank" rel="external">https://seajs.github.io/seajs/docs/</a></li>
<li>GitHub : <a href="https://github.com/seajs/seajs" target="_blank" rel="external">https://github.com/seajs/seajs</a></li>
<li>下载地址 : <a href="https://github.com/seajs/seajs/archive/3.0.0.zip" target="_blank" rel="external">https://github.com/seajs/seajs/archive/3.0.0.zip</a></li>
<li>提供简单、极致的模块化开发体验</li>
<li>A Module Loader for the Web</li>
<li>JavaScript 模块加载器</li>
<li>可以实现 在 JavaScript 代码中去加载另一个 JavaScript 代码。</li>
</ul>
<h4 id="10-1-SeaJS-介绍"><a href="#10-1-SeaJS-介绍" class="headerlink" title="10.1. SeaJS 介绍"></a>10.1. SeaJS 介绍</h4><p>SeaJs 带来的最大的好处是 : 提升代码的可维护性。如果一个网站的 JS 文件超过 3 个，就适合 SeaJS 来组织和维护代码。涉及的 JS 文件越多，SeaJS 就越适合。</p>
<ul>
<li>关于 SeaJS<ul>
<li>SeaJS 是一个适用于浏览器环境的 JavaScript 模块加载器<ul>
<li>一个库文件，类似于 jQuery</li>
<li>使用这个库提供的规范的模块化的方式来编写 JavaScript 代码</li>
<li>只关心 JavaScript 文件代码模块如何组织<ul>
<li>只关心 JavaScript 文件之间如何相互协议、引用、依赖</li>
</ul>
</li>
</ul>
</li>
<li>SeaJS 的作者是阿里巴巴支付宝前端架构师，花名 : 玉伯，玉伯也叫射雕<ul>
<li>Sea.js 创始人玉伯的前端开发之路   <a href="http://www.csdn.net/article/2013-09-03/2816801-front-end-development-seajs-framework" target="_blank" rel="external">http://www.csdn.net/article/2013-09-03/2816801-front-end-development-seajs-framework</a></li>
</ul>
</li>
<li>SeaJs  <a href="http://seajs.org/" target="_blank" rel="external">http://seajs.org/</a></li>
<li>SeaJS -github  <a href="https://github.com/seajs/seajs/" target="_blank" rel="external">https://github.com/seajs/seajs/</a></li>
</ul>
</li>
<li>为什么学习和使用 SeaJs ?<ul>
<li><strong>简单友好的模块定义规范</strong> : SeaJs 遵循 CMD 规范，可以像 Node 一样书写模块代码</li>
<li><strong>自然直观的代码组织方式</strong> : 依赖的自动加载、配置简洁清晰，可以让我们更多的享受编码的乐趣</li>
<li>SeaJS兼容性非常好，计划可以运作在任何浏览器引擎上</li>
<li>注1 : SeaJS 只是实现模块化开发的一种方式或者说一种工具而已，重在模块化思想的理解</li>
<li>注2 : 因为 SeaJS 采用的 CMD 模块规范和 Node 中的 CommonJs 模块规范非常一致，所以有利于我们学习 Node 中的模块化编程</li>
</ul>
</li>
<li>谁在用 ?<ul>
<li>淘宝网、支付宝、京东、爱奇艺…</li>
</ul>
</li>
<li>SeaJS 使用场景<ul>
<li>SeaJS 不提供任何功能性 API ，只提供了解决 JavaScript 代码的命名污染和文件依赖的问题</li>
<li>所以 SeaJS 可以和 jQuery、underscore 等库结合使用</li>
<li>例如 只写写 原生 JavaScript 或者用了一些第三方库</li>
</ul>
</li>
</ul>
<h4 id="10-2-快速上手-Getting-Started"><a href="#10-2-快速上手-Getting-Started" class="headerlink" title="10.2. 快速上手 ( Getting Started )"></a>10.2. 快速上手 ( Getting Started )</h4><ol>
<li>下载 Sea.js 库文件<ul>
<li>SeaJS - Release  <a href="https://github.com/seajs/seajs/releases" target="_blank" rel="external">https://github.com/seajs/seajs/releases</a></li>
<li>bower install seajs</li>
<li>npm install seajs</li>
</ul>
</li>
<li>在页面中引入 sea.js</li>
<li>使用 define 函数定义模块</li>
<li>使用 require 函数加载模块</li>
<li>使用 module.exports 对外暴露接口对象</li>
<li>使用 seajs.use 函数启动模块系统</li>
</ol>
<h4 id="10-3-API-详解"><a href="#10-3-API-详解" class="headerlink" title="10.3. API 详解"></a>10.3. API 详解</h4><h5 id="10-3-1-seajs-use"><a href="#10-3-1-seajs-use" class="headerlink" title="10.3.1. seajs.use"></a>10.3.1. seajs.use</h5><ul>
<li>加载模块，启动模块系统</li>
<li>加载一个模块 seajs.use(‘id’)</li>
<li>加载一个模块，在加载完成时，执行回调 seajs.use (‘id’,callback)</li>
<li>加多个模块，加载完成时，执行回调 seajs.use([‘id1’,’id2’,…],callback)</li>
<li>注意 : <ul>
<li>在调用 seajs.use 之前，需要先引入 Sea.js 文件</li>
<li>seajs.use 与 DOM ready 事件没有任何关系。如果某些操作确保在 DOM ready 后执行，需要使用 jQuery 等类库来保证</li>
<li>seajs.use 理论上只用于加载启动，不应该出现在 define 中的模块代码里</li>
</ul>
</li>
</ul>
<h5 id="10-3-2-define-factory"><a href="#10-3-2-define-factory" class="headerlink" title="10.3.2. define( factory )"></a>10.3.2. define( factory )</h5><p>define 是一个全局函数，用来定义某块。</p>
<p>define 接受 factory 参数，factory 可以是一个函数，也可以是一个对象或字符串。</p>
<p>factory 为对象、字符串时，表示模块的接口就是该对象、字符串。</p>
<ul>
<li>factory 是一个对象时<ul>
<li>define ({})</li>
</ul>
</li>
<li>factory 是一个字符串时<ul>
<li>define (‘hello’)</li>
</ul>
</li>
<li>factory 是一个函数时<ul>
<li>define(function(require,exports,module){})</li>
</ul>
</li>
</ul>
<h5 id="10-3-3-require"><a href="#10-3-3-require" class="headerlink" title="10.3.3. require"></a>10.3.3. require</h5><p>require 用来加载一个 js 文件模块，require 用来获取指定模块的接口对象 module.exports。</p>
<p>require 在加载和执行的时候，js会按照同步的方式和执行。</p>
<p>使用注意 : </p>
<ul>
<li>正确拼写 <ul>
<li>模块 factory 构造方法的第一个参数 必须 命名为 require</li>
</ul>
</li>
<li>不要修改<ul>
<li>不要重命名 require 函数，或在任何作用域中给 require 重新赋值</li>
</ul>
</li>
<li>使用字符串直接量<ul>
<li>require 的参数值 必须 是字符串直接量</li>
</ul>
</li>
</ul>
<p>Tips : 把 require 看做事语法关键字就好啦</p>
<h5 id="10-3-4-模块标识"><a href="#10-3-4-模块标识" class="headerlink" title="10.3.4. 模块标识"></a>10.3.4. 模块标识</h5><p>模块标识是一个字符串，用来标识模块。</p>
<ul>
<li>模块标识可以不包含文件后缀名，比如 .js<ul>
<li>seajs 推荐不加 .js 文件模块后缀</li>
</ul>
</li>
<li>模块标识可以是 <strong>相对</strong> 或 <strong>顶级</strong> 标识</li>
<li>相对标识</li>
</ul>
<p>相对标识以 . 或 / 开始，会相对模块系统的基础路径 ( base 路径，默认是 Sea.js 文件所属的路径 )。可以手动配置 base 路径。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">seajs.config(&#123;</div><div class="line">  base : <span class="string">'./js'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>普通路径</li>
</ul>
<p>除了相对和顶级标识之外的标识都是普通路径。普通路径的解析规则，会相对当前页面解析。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 假设当前页面是 http://example.com/path/to/page/index.html</span></div><div class="line"></div><div class="line"><span class="comment">// 绝对路径是普通路径:</span></div><div class="line"><span class="built_in">require</span>.resolve(<span class="string">'http://cdn.com/js/a'</span>);</div><div class="line"><span class="comment">// =&gt; http://cdn.com/js/a.js</span></div><div class="line"></div><div class="line"><span class="comment">// 根路径是普通路径:</span></div><div class="line"><span class="built_in">require</span>.resolve(<span class="string">'/js/b'</span>);</div><div class="line"><span class="comment">// =&gt; http://example.com/js/b.js</span></div><div class="line"></div><div class="line"><span class="comment">//use 中的相对路径始终是普通路径:</span></div><div class="line">seajs.use(<span class="string">'./c'</span>);</div><div class="line"><span class="comment">// =&gt; 加载的是 http://example.com/path/page/c.js</span></div><div class="line"></div><div class="line">seajs.use(<span class="string">'../d'</span>);</div><div class="line"><span class="comment">// =&gt; 加载的是 http://example.com/path/to/d.js</span></div></pre></td></tr></table></figure>
<p><strong>Tips :</strong></p>
<ul>
<li><p>顶级标识始终相对 base 基础路径解析。</p>
<ul>
<li>如果不设置，base路径默认就是 Sea.js 库文件所属的路径</li>
<li>可以通过 seajs.config({ base: ‘基础路径’ }) 来配置基础路径</li>
</ul>
</li>
<li>绝对路径和根路径始终相对当前页面解析。</li>
<li>相对标识永远相对于当前文件</li>
<li>seajs.use 中的相对路径始终相对于当前页面来解析。</li>
</ul>
<h5 id="10-3-5-module"><a href="#10-3-5-module" class="headerlink" title="10.3.5. module"></a>10.3.5. module</h5><p>module 是一个对象，上面存储了与当前模块相关联的一些属性和方法。</p>
<ul>
<li>module.id<ul>
<li>模块的唯一标识，可以通过 define 方法的第一个参数来指定，默认为该模块文件的绝对路径</li>
</ul>
</li>
<li>module.uri<ul>
<li>模块的绝对路径</li>
</ul>
</li>
<li>module.dependencies<ul>
<li>dependencies 是一个数组，表示当前模块的依赖</li>
</ul>
</li>
<li>module.exports<ul>
<li>D当前模块对外提供的接口对象</li>
<li>相当于每个模块内部最终都执行了这么一句话 : return module.exports</li>
<li>模块与模块之间的通信接口</li>
</ul>
</li>
</ul>
<h5 id="10-3-6-exports"><a href="#10-3-6-exports" class="headerlink" title="10.3.6. exports"></a>10.3.6. exports</h5><p>exports 仅仅是 module.exports 的一个引用。也就是说修改了 exports 就相当于修改了 module.exports。</p>
<p>但是一旦在 打车投入 内部给 exports 重新赋值，并不会改变 module.exports 的值。因此给 exports 赋值时无效的。</p>
<h5 id="10-3-7-exports-和-module-exports-的区别"><a href="#10-3-7-exports-和-module-exports-的区别" class="headerlink" title="10.3.7. exports 和 module.exports 的区别"></a>10.3.7. exports 和 module.exports 的区别</h5><ul>
<li>每个模块内部对外到处的接口对象始终都是 module.exports</li>
<li>可以通过修改 module.exports 或给它赋值改变模块接口对象</li>
<li>exports 是 module.exports 的一个引用，就好比在每一个模块定义最开始的地方写了这么一句代码 : var exports = module.exports</li>
</ul>
<p>关于他们的区别请分析一下代码 ：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="built_in">module</span> = &#123;</div><div class="line">  exports: &#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeExports</span> (<span class="params">exports, module</span>) </span>&#123;</div><div class="line">  <span class="comment">// var exports = module.exports</span></div><div class="line">  ecports.foo = <span class="string">'bar'</span></div><div class="line">  </div><div class="line">  <span class="comment">// 这里赋值拿不到，不要使用</span></div><div class="line">  <span class="comment">// exports = function () &#123;&#125;</span></div><div class="line"> <span class="keyword">return</span> <span class="built_in">module</span>.exports</div><div class="line">&#125;</div><div class="line"></div><div class="line">changeExports(<span class="built_in">module</span>.exports, <span class="built_in">module</span>)</div></pre></td></tr></table></figure>
<p>为什么要有 exports?</p>
<p>为了开发体验，AP 更友好，使用 exports的时候，可以少写一个点。</p>
<h5 id="10-3-8-如何将一个普通的模块文件改造为兼容-CMD-规范的模块"><a href="#10-3-8-如何将一个普通的模块文件改造为兼容-CMD-规范的模块" class="headerlink" title="10.3.8. 如何将一个普通的模块文件改造为兼容 CMD 规范的模块"></a>10.3.8. 如何将一个普通的模块文件改造为兼容 CMD 规范的模块</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">"function"</span> &amp;&amp; define.cmd) &#123;</div><div class="line">  <span class="comment">// 有 Sea.js 等 CMD 模块加载器存在</span></div><div class="line">  define(<span class="function"><span class="keyword">function</span> (<span class="params">require, exports, module</span>) </span>&#123;</div><div class="line">    <span class="comment">// 使用 module.exports 向外暴露接口对象</span></div><div class="line">  &#125;) </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="10-3-9-高级配置-seajs-config-options"><a href="#10-3-9-高级配置-seajs-config-options" class="headerlink" title="10.3.9. 高级配置 seajs.config(options)"></a>10.3.9. 高级配置 seajs.config(options)</h5><p>可以对 Sea.js进行配置，让模块编写、开发调试更方便。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">seajs.config (&#123;</div><div class="line">  <span class="comment">// 别名配置</span></div><div class="line">  alias: &#123;</div><div class="line">     <span class="string">'es5-safe'</span>: <span class="string">'gallery/es5-safe/0.9.3/es5-safe'</span>,</div><div class="line">    <span class="string">'json'</span>: <span class="string">'gallery/json/1.0.2/json'</span>,</div><div class="line">    <span class="string">'jquery'</span>: <span class="string">'jquery/jquery/1.10.1/jquery'</span></div><div class="line">  &#125;,</div><div class="line">  </div><div class="line">  <span class="comment">// 路径配置</span></div><div class="line">  paths: &#123;</div><div class="line">     <span class="string">'gallery'</span>: <span class="string">'https://a.alipayobjects.com/gallery'</span></div><div class="line">  &#125;,</div><div class="line">  </div><div class="line">  <span class="comment">// Sea.js 的基础路径</span></div><div class="line">   base: <span class="string">'http://example.com/path/to/base/'</span>,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/30/js高级/" data-id="cj6yljgxj0000scu221hn3kn5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2017/08/23/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/08/30/js高级/">js高级程序语言</a>
          </li>
        
          <li>
            <a href="/2017/08/23/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>